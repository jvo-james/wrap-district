<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>Wrap District — Mobile</title>

  <!-- Fonts & Icons -->
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;600;800&display=swap" rel="stylesheet">
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">

  <style>
    :root{
  --bg:#0c0c0c;
  --card:#141414;
  --accent:#ff6a00;   /* orange like flyers */
  --accent-2:#ffcc00; /* yellow */
  --muted:#d8d8d8;
  --glass: rgba(255,255,255,0.03);
  --radius:14px;
  --maxw:880px;
  --text:#fff;
  --success:#2dd36f;
  --danger:#ff4d4f;
}

*{box-sizing:border-box}
html,body{height:100%;margin:0;font-family:Inter,system-ui,-apple-system, "Segoe UI", Roboto, Arial;color:var(--text);background:linear-gradient(180deg,#070707,#141414)}
a{color:inherit}
.container{padding:16px;max-width:var(--maxw);margin:0 auto}

/* HEADER */
.site-header{position:fixed;top:0;left:0;right:0;z-index:70;background:linear-gradient(180deg, rgba(10,10,10,0.8), rgba(10,10,10,0.6));backdrop-filter:blur(8px);border-bottom:1px solid rgba(255,255,255,0.03)}
.header-inner{display:flex;align-items:center;justify-content:space-between;padding:12px 16px}
.logo{display:flex;align-items:center;gap:8px}
.logo-mark{background:var(--accent);color:#111;font-weight:800;padding:6px 10px;border-radius:8px;font-size:16px}
.logo-text{font-weight:700;color:var(--accent-2);letter-spacing:1px}
.header-actions{display:flex;gap:8px;align-items:center}
.icon-btn{background:transparent;border:0;color:var(--muted);font-size:20px;padding:8px;border-radius:10px}
.icon-btn:active{transform:scale(0.98)}
.badge{position:absolute;top:6px;right:6px;background:var(--danger);color:#fff;border-radius:999px;padding:2px 6px;font-size:12px;display:inline-block}

/* mobile nav slide down */
.mobile-nav{display:none;flex-direction:column;background:linear-gradient(180deg, rgba(0,0,0,0.6), rgba(10,10,10,0.7));border-top:1px solid rgba(255,255,255,0.02);padding:8px}
.mobile-link{display:flex;gap:8px;padding:10px;border-radius:8px;color:var(--muted);text-decoration:none}

/* HERO */
.hero{padding-top:84px;padding-bottom:18px}
.slideshow{position:relative;overflow:hidden;border-radius:18px;margin:12px; min-height:360px;background:linear-gradient(180deg, rgba(255,255,255,0.02), rgba(0,0,0,0.02))}
.slide{display:flex;align-items:center;gap:12px;padding:14px;transition:transform .6s ease, opacity .6s ease;min-height:320px}
.slide-media img{width:140px;height:140px;object-fit:cover;border-radius:12px;box-shadow:0 12px 30px rgba(0,0,0,0.6)}
.slide-content{flex:1;padding:8px}
.pill{display:inline-block;background:rgba(255,255,255,0.04);padding:6px 10px;border-radius:20px;color:var(--accent-2);font-weight:700;margin-bottom:12px}
.promo-pill{background:linear-gradient(90deg,var(--accent),var(--accent-2));color:#111}
.slide h1{font-size:20px;margin:6px 0 8px;color:var(--accent-2)}
.slide .muted{color:var(--muted);font-size:13px}
.slide-ctas .btn{margin-right:8px;border-radius:12px}

/* slideshow controls/dots */
.slideshow-controls{position:absolute;left:0;right:0;bottom:12px;display:flex;align-items:center;justify-content:center;gap:12px}
.ctrl{background:rgba(0,0,0,0.5);border:0;color:var(--muted);padding:8px;border-radius:10px}
.dots{display:flex;gap:6px}
.dots button{width:8px;height:8px;border-radius:8px;border:0;background:rgba(255,255,255,0.12)}
.dots button.active{background:var(--accent-2)}

/* MENU */
.section-header h2{font-size:18px;color:var(--accent-2)}
.menu-list{display:flex;flex-direction:column;gap:12px;padding:8px}
.card-item{background:linear-gradient(180deg, rgba(255,255,255,0.02), rgba(0,0,0,0.02));padding:12px;border-radius:12px;border:1px solid rgba(255,255,255,0.03);display:flex;gap:12px;align-items:center}
.card-thumb{width:88px;height:88px;border-radius:10px;flex-shrink:0;overflow:hidden;background:#111;display:flex;align-items:center;justify-content:center}
.card-thumb img{width:100%;height:100%;object-fit:cover}
.card-body{flex:1}
.card-title{display:flex;justify-content:space-between;align-items:center;gap:8px}
.card-title h3{font-size:16px;margin:0;color:var(--accent-2)}
.card-desc{color:var(--muted);font-size:13px;margin-top:6px}
.price-tag{font-weight:800;color:var(--accent);font-size:15px}
.menu-actions{display:flex;gap:8px;align-items:center;margin-top:10px;flex-wrap:wrap}
.select, .small-btn{padding:8px;border-radius:10px;border:1px solid rgba(255,255,255,0.04);background:transparent;color:var(--muted);font-weight:600}
.small-btn{cursor:pointer}
.add-btn{background:var(--accent);border:0;color:#111;padding:8px 12px;border-radius:10px;font-weight:800}
.remove-btn{background:transparent;border:1px solid rgba(255,255,255,0.06);color:var(--muted);padding:8px 12px;border-radius:10px}

/* BADGES */
.badge-promo{background:linear-gradient(90deg,var(--accent),var(--accent-2));padding:6px 8px;border-radius:10px;color:#111;font-weight:800;font-size:12px}

/* PROMO section */
.promo{margin-top:12px;padding:12px;border-radius:12px;background:linear-gradient(180deg, rgba(255,106,0,0.06), rgba(0,0,0,0.02));border:1px solid rgba(255,255,255,0.02)}
.promo-row{display:flex;justify-content:space-between;align-items:center}
.promo-left{display:flex;gap:10px;align-items:center}
.big-icon{font-size:28px;color:var(--accent)}
.countdown{font-weight:700;color:var(--accent-2)}

/* CONTACT cards */
.contact-cards{display:grid;grid-template-columns:repeat(3,1fr);gap:8px;margin-top:8px}
.card{background:var(--card);padding:10px;border-radius:12px;display:flex;gap:10px;align-items:center}
.card .label{color:var(--muted);font-size:12px}
.card .value{font-weight:800;color:var(--accent-2)}

/* CART panel */
.cart-panel{position:fixed;right:-100%;top:0;bottom:0;width:92%;max-width:420px;background:linear-gradient(180deg,#0d0d0d,#151515);box-shadow:-30px 0 60px rgba(0,0,0,0.7);z-index:90;padding:12px;transition:right .32s ease}
.cart-panel.open{right:0}
.cart-header{display:flex;justify-content:space-between;align-items:center;border-bottom:1px solid rgba(255,255,255,0.03);padding-bottom:8px}
.cart-body{padding:10px;min-height:220px;max-height:60vh;overflow:auto}
.cart-item{display:flex;gap:10px;align-items:center;padding:10px;border-radius:10px;background:rgba(255,255,255,0.02);margin-bottom:8px}
.cart-item .ci-thumb{width:56px;height:56px;border-radius:8px;overflow:hidden}
.ci-meta{flex:1}
.ci-controls{display:flex;gap:8px;align-items:center}
.qty-btn{padding:6px 8px;border-radius:8px;border:1px solid rgba(255,255,255,0.06);background:transparent}
.cart-footer{border-top:1px solid rgba(255,255,255,0.03);padding-top:10px}
.total-row{display:flex;justify-content:space-between;align-items:center;padding:6px 0}
.muted{color:var(--muted)}

/* Promo modal */
.promo-modal{position:fixed;left:0;right:0;top:0;bottom:0;display:flex;align-items:center;justify-content:center;background:linear-gradient(rgba(0,0,0,0.4),rgba(0,0,0,0.4));z-index:200;opacity:0;pointer-events:none;transition:opacity .2s ease}
.promo-modal.show{opacity:1;pointer-events:auto}
.promo-card{background:linear-gradient(180deg,#1e0b00,#2b0f00);padding:18px;border-radius:14px;max-width:420px;position:relative}
.close-modal{position:absolute;right:8px;top:8px}
.modal-actions{display:flex;gap:8px;justify-content:flex-end;margin-top:12px}

/* FOOTER */
.site-footer{margin-top:24px;padding:14px;border-top:1px solid rgba(255,255,255,0.03);color:var(--muted);text-align:center}
.socials{display:flex;gap:8px;justify-content:center;margin-top:6px}

/* Responsive */
@media (max-width:720px){
  .slide{flex-direction:column;align-items:flex-start}
  .slide-media img{width:100%;height:220px;border-radius:12px}
  .contact-cards{grid-template-columns:1fr 1fr 1fr}
  .menu-list{padding:6px}
  .cart-panel{width:100%}
  .dots { gap:8px }
}
  </style>
</head>
<body>
  <!-- Sticky header -->
  <header class="site-header">
    <div class="header-inner">
      <div class="logo">
        <div class="logo-mark">WRAP</div>
        <div class="logo-text">District</div>
      </div>

      <div class="header-actions">
        <button id="cartBtn" class="icon-btn" aria-label="Open cart">
          <i class="fa-solid fa-cart-shopping"></i>
          <span id="cartCount" class="badge">0</span>
        </button>

        <button id="hamburger" class="icon-btn" aria-label="Open menu">
          <i class="fa-solid fa-bars"></i>
        </button>
      </div>
    </div>

    <!-- mobile nav (slide down) -->
    <nav id="mobileNav" class="mobile-nav" aria-hidden="true">
      <a href="#menu" class="mobile-link"><i class="fa-solid fa-utensils"></i> Menu</a>
      <a href="#promo" class="mobile-link"><i class="fa-solid fa-bullhorn"></i> Promo</a>
      <a href="#contact" class="mobile-link"><i class="fa-solid fa-phone"></i> Contact</a>
    </nav>
  </header>

  <main>
    <!-- HERO: 3-slide slideshow -->
    <section class="hero">
      <div class="slideshow" id="slideshow">
        <div class="slide" data-index="0" style="--bg-img: url('hero-shawarma-large.jpg')">
          <div class="slide-art-left"></div>
          <div class="slide-content">
            <div class="pill">Fresh • Hot • Fast</div>
            <h1>Handmade Shawarma & Loaded Fries</h1>
            <p class="muted">Made daily in Tema Community 25 — open Mon–Fri: 5pm • Sat–Sun: 9am</p>
            <div class="slide-ctas">
              <a href="#menu" class="btn primary"><i class="fa-solid fa-bolt"></i> Order Now</a>
              <button class="btn ghost" onclick="openCart()"><i class="fa-solid fa-cart-plus"></i> View Cart</button>
            </div>
          </div>
          <div class="slide-media">
            <img src="hero-shawarma-large.jpg" alt="shawarma">
          </div>
        </div>

        <div class="slide" data-index="1" style="--bg-img: url('hero-fries-large.jpg')">
          <div class="slide-content">
            <div class="pill">Premium Toppings</div>
            <h1>Loaded Fries — Cheese, Crispy Chicken & More</h1>
            <p class="muted">Pair with a free Coke on eligible combos.</p>
            <div class="slide-ctas">
              <a href="#menu" class="btn primary"><i class="fa-solid fa-fire"></i> See Menu</a>
              <a href="#promo" class="btn ghost"><i class="fa-solid fa-tag"></i> Promo</a>
            </div>
          </div>
          <div class="slide-media">
            <img src="hero-fries-large.jpg" alt="fries">
          </div>
        </div>

        <div class="slide" data-index="2" style="--bg-img: url('promo-shawarma.jpg')">
          <div class="slide-content">
            <div class="pill promo-pill"><i class="fa-solid fa-gift"></i> Tuesday Special</div>
            <h1>Buy 2 Shawarmas, Get 1 Free</h1>
            <p class="muted">Auto-applied in cart. Add 2 and we'll add the free one at checkout.</p>
            <div class="slide-ctas">
              <a href="#menu" class="btn primary"><i class="fa-solid fa-hand-holding-dollar"></i> Claim Promo</a>
            </div>
          </div>
          <div class="slide-media">
            <img src="promo-fries.jpg" alt="promo">
          </div>
        </div>

        <div class="slideshow-controls">
          <button id="prevSlide" class="ctrl"><i class="fa-solid fa-chevron-left"></i></button>
          <div id="dots" class="dots"></div>
          <button id="nextSlide" class="ctrl"><i class="fa-solid fa-chevron-right"></i></button>
        </div>
      </div>
    </section>

    <!-- MENU -->
    <section id="menu" class="menu container">
      <header class="section-header">
        <h2>Menu</h2>
        <p class="muted">Tap an item to configure. Promo badges show eligible items.</p>
      </header>

      <div class="menu-list" id="menuList">
        <!-- Menu items will be rendered via JS -->
      </div>
    </section>

    <!-- PROMO small area -->
    <section id="promo" class="promo container">
      <div class="promo-row">
        <div class="promo-left">
          <i class="fa-solid fa-bullhorn big-icon"></i>
          <div>
            <h3>Promo Live</h3>
            <p>Buy 2 Shawarmas get 1 free. Loaded Fries include a free Coke.</p>
          </div>
        </div>
        <div class="promo-right">
          <div id="promoCountdown" class="countdown muted"></div>
        </div>
      </div>
    </section>

    <!-- CONTACT & FOOTER -->
    <section id="contact" class="contact container">
      <h2>Contact</h2>
      <div class="contact-cards">
        <div class="card">
          <i class="fa-solid fa-phone fa-2x"></i>
          <div class="card-body">
            <div class="label">Call / WhatsApp</div>
            <div class="value">0552509241</div>
          </div>
        </div>
        <div class="card">
          <i class="fa-brands fa-snapchat fa-2x"></i>
          <div class="card-body">
            <div class="label">Snapchat</div>
            <div class="value">@kenneth_idk</div>
          </div>
        </div>
        <div class="card">
          <i class="fa-solid fa-location-dot fa-2x"></i>
          <div class="card-body">
            <div class="label">Location</div>
            <div class="value">Tema Community 25, Devtraco</div>
          </div>
        </div>
      </div>
    </section>
  </main>

  <!-- Cart slide-in -->
  <aside id="cartPanel" class="cart-panel" aria-hidden="true">
    <div class="cart-header">
      <h3><i class="fa-solid fa-cart-shopping"></i> Your Cart</h3>
      <button id="closeCart" class="icon-btn"><i class="fa-solid fa-xmark"></i></button>
    </div>

    <div class="cart-body" id="cartBody">
      <!-- items injected by JS -->
      <div class="empty-cart">Your cart is empty. Add something tasty!</div>
    </div>

    <div class="cart-footer" id="cartFooter">
      <!-- totals injected by JS -->
    </div>
  </aside>

  <!-- Promo modal / slide-in -->
  <div id="promoModal" class="promo-modal" role="dialog" aria-modal="true" aria-hidden="true">
    <div class="promo-card">
      <button id="promoClose" class="icon-btn close-modal"><i class="fa-solid fa-xmark"></i></button>
      <h3>Tuesday Promo</h3>
      <p><strong>Buy 2 Shawarmas, get 1 free.</strong> Promo applied automatically in cart. Limited time.</p>
      <div class="modal-actions">
        <button id="dontShowPromo" class="btn ghost">Don't show again</button>
        <button class="btn primary" onclick="document.querySelector('#menu').scrollIntoView({behavior:'smooth'}); closePromoModal();">Claim Now</button>
      </div>
    </div>
  </div>

  <footer class="site-footer">
    <div class="foot-inner container">
      <small>© Wrap District • Delivery at a fee • Built for mobile</small>
      <div class="socials">
        <i class="fa-brands fa-instagram"></i>
        <i class="fa-brands fa-facebook"></i>
      </div>
    </div>
  </footer>

  <script>
    /* Mobile-first interactive scripts
   - Uses the image filenames exactly as provided by user
   - Handles menu rendering, add/remove, cart, promos, hero slideshow, promo modal & countdown
*/

(() => {
  /* --- Data: menu + pricing tiers --- */
  const MENU_ITEMS = [
    {
      id: 'shawarma',
      name: 'Shawarma',
      thumbnail: 'thumb-shawarma.jpg',
      promo: 'Buy 2 Get 1',
      // sizes (base price without protein)
      sizes: [
        {key: 'lite', label: 'Lite (Small)', base: 45},
        {key: 'classic', label: 'Classic (Medium)', base: 55},
        {key: 'max', label: 'District Max (Large)', base: 70},
      ],
      proteins: [
        {key: 'none', label: 'No meat', add: 0},
        {key: 'chicken', label: 'Chicken (+GHC5)', add: 5},
        {key: 'beef', label: 'Beef (+GHC10)', add: 10},
        {key: 'mixed', label: 'Mixed (+GHC15)', add: 15}
      ]
    },
    {
      id: 'fries',
      name: 'Loaded Fries',
      thumbnail: 'thumb-fries.jpg',
      promo: 'Free Coke',
      portions: [
        {key:'regular', label:'Regular', price:55},
        {key:'large', label:'Large', price:65}
      ],
      addons: [
        {key:'chicken', label:'Extra Chicken (+15)', price:15},
        {key:'cheese', label:'Extra Cheese (+10)', price:10}
      ]
    },
    {
      id: 'friedrice',
      name: 'Fried Rice',
      thumbnail: 'hero-friedrice-large.jpg',
      price: 60,
      note: 'Classic spiced fried rice — serves 1'
    },
    {
      id: 'angwamo',
      name: 'Loaded Angwamo',
      thumbnail: 'hero-angwamo-large.jpg',
      tiers: [
        {key:'basic',label:'Basic (Rice+egg+stew)',price:55},
        {key:'classic',label:'Classic (+chicken)',price:60},
        {key:'max',label:'Max (sausage+gizzard)',price:70}
      ]
    },
    {
      id: 'noodles',
      name: 'Noodles',
      thumbnail: 'thumb-noodle.jpg',
      price: 50,
      note: 'Choice of chicken, canned beef or gizzard'
    }
  ];

  /* --- simple state --- */
  const state = {
    cart: [], // {uid, itemId, label, price, qty, meta}
  };

  /* ----- Utilities ----- */
  const $ = (s, root=document) => root.querySelector(s);
  const $$ = (s, root=document) => Array.from(root.querySelectorAll(s));
  const clamp2 = v => Math.round((v + Number.EPSILON) * 100) / 100;

  /* ----- Cart helpers ----- */
  function findCartIndex(uid) {
    return state.cart.findIndex(it => it.uid === uid);
  }
  function totalCartCount() {
    return state.cart.reduce((s,it)=>s+it.qty,0);
  }
  function updateCartBadge(){
    const c = totalCartCount();
    $('#cartCount').textContent = c;
  }

  function openCart(){
    $('#cartPanel').classList.add('open');
    $('#cartPanel').setAttribute('aria-hidden','false');
    renderCart();
  }
  window.openCart = openCart;
  function closeCart(){
    $('#cartPanel').classList.remove('open');
    $('#cartPanel').setAttribute('aria-hidden','true');
  }

  /* ----- pricing helpers ----- */
  function makeShawarmaLabel(sizeKey, proteinKey){
    const size = MENU_ITEMS.find(m => m.id==='shawarma').sizes.find(s=>s.key===sizeKey);
    const protein = MENU_ITEMS.find(m => m.id==='shawarma').proteins.find(p=>p.key===proteinKey);
    return `${size.label}${protein.key!=='none' ? ' • '+protein.label.split(' (')[0] : ''}`;
  }
  function calcShawarmaPrice(sizeKey, proteinKey){
    const size = MENU_ITEMS.find(m => m.id==='shawarma').sizes.find(s=>s.key===sizeKey);
    const protein = MENU_ITEMS.find(m => m.id==='shawarma').proteins.find(p=>p.key===proteinKey);
    return clamp2(size.base + protein.add);
  }

  function calcFriesPrice(portionKey, addonKeys=[]){
    const portions = MENU_ITEMS.find(m=>m.id==='fries').portions;
    const base = portions.find(p=>p.key===portionKey).price;
    const addons = MENU_ITEMS.find(m=>m.id==='fries').addons;
    const addVal = addons.filter(a=>addonKeys.includes(a.key)).reduce((s,a)=>s+a.price,0);
    return clamp2(base + addVal);
  }

  /* ----- render menu ----- */
  function renderMenu(){
    const container = $('#menuList');
    container.innerHTML = '';
    MENU_ITEMS.forEach(item=>{
      const el = document.createElement('div');
      el.className = 'card-item';
      el.innerHTML = `
        <div class="card-thumb"><img src="${item.thumbnail}" alt="${item.name}"></div>
        <div class="card-body">
          <div class="card-title">
            <h3>${item.name}</h3>
            <div class="${item.promo ? 'badge-promo' : ''}">${item.promo || ''}</div>
          </div>
          <div class="card-desc">${item.note || ''}</div>

          <div class="menu-actions" data-id="${item.id}"></div>
        </div>
      `;

      container.appendChild(el);
      const actions = el.querySelector('.menu-actions');

      if(item.id === 'shawarma'){
        // size select
        const sizeSel = document.createElement('select');
        sizeSel.className = 'select';
        item.sizes.forEach(s => {
          sizeSel.innerHTML += `<option value="${s.key}">${s.label} • GHC ${s.base}</option>`;
        });
        actions.appendChild(sizeSel);

        // protein select
        const protSel = document.createElement('select');
        protSel.className = 'select';
        item.proteins.forEach(p => {
          protSel.innerHTML += `<option value="${p.key}">${p.label}</option>`;
        });
        actions.appendChild(protSel);

        // price preview
        const priceTag = document.createElement('div');
        priceTag.className = 'price-tag';
        priceTag.textContent = 'GHC ' + calcShawarmaPrice(item.sizes[0].key, item.proteins[0].key);
        actions.appendChild(priceTag);

        // Add/Remove button
        const addBtn = document.createElement('button');
        addBtn.className = 'add-btn';
        addBtn.textContent = 'Add';
        actions.appendChild(addBtn);

        // listen changes
        const updatePreview = () => {
          const price = calcShawarmaPrice(sizeSel.value, protSel.value);
          priceTag.textContent = 'GHC ' + price;
        };
        sizeSel.addEventListener('change', updatePreview);
        protSel.addEventListener('change', updatePreview);

        addBtn.addEventListener('click', ()=>{
          const uid = `shawarma::${sizeSel.value}::${protSel.value}`;
          const price = calcShawarmaPrice(sizeSel.value, protSel.value);
          const label = makeShawarmaLabel(sizeSel.value, protSel.value);
          toggleAddRemove({uid, itemId:'shawarma', price, label, thumbnail: item.thumbnail}, addBtn);
        });

      } else if(item.id === 'fries'){
        // portion select
        const portionSel = document.createElement('select');
        portionSel.className = 'select';
        item.portions.forEach(p=> {
          portionSel.innerHTML += `<option value="${p.key}">${p.label} • GHC ${p.price}</option>`;
        });
        actions.appendChild(portionSel);

        // addons (multi)
        const addonWrap = document.createElement('div');
        addonWrap.style.display='flex';
        addonWrap.style.gap='8px';
        item.addons.forEach(a=>{
          const btn = document.createElement('button');
          btn.className = 'small-btn';
          btn.textContent = a.label;
          btn.dataset.key = a.key;
          btn.addEventListener('click', ()=>{ btn.classList.toggle('active'); });
          addonWrap.appendChild(btn);
        });
        actions.appendChild(addonWrap);

        const priceTag = document.createElement('div');
        priceTag.className = 'price-tag';
        priceTag.textContent = 'GHC ' + calcFriesPrice(item.portions[0].key);
        actions.appendChild(priceTag);

        portionSel.addEventListener('change', ()=>{
          const addonKeys = Array.from(addonWrap.querySelectorAll('.active')).map(b=>b.dataset.key);
          priceTag.textContent = 'GHC ' + calcFriesPrice(portionSel.value, addonKeys);
        });

        const addBtn = document.createElement('button');
        addBtn.className = 'add-btn';
        addBtn.textContent = 'Add';
        actions.appendChild(addBtn);

        addBtn.addEventListener('click', ()=>{
          const addonKeys = Array.from(addonWrap.querySelectorAll('.active')).map(b=>b.dataset.key);
          const price = calcFriesPrice(portionSel.value, addonKeys);
          const uid = `fries::${portionSel.value}::${addonKeys.sort().join(',')}`;
          const label = `Fries • ${portionSel.value}${addonKeys.length? ' • ' + addonKeys.join('+'):''}`;
          toggleAddRemove({uid, itemId:'fries', price, label, thumbnail: item.thumbnail}, addBtn);
        });

      } else if(item.id === 'friedrice'){
        const priceTag = document.createElement('div'); priceTag.className='price-tag'; priceTag.textContent = 'GHC ' + item.price;
        actions.appendChild(priceTag);
        const addBtn = document.createElement('button'); addBtn.className='add-btn'; addBtn.textContent='Add';
        actions.appendChild(addBtn);
        addBtn.addEventListener('click', ()=>{
          const uid = `friedrice::std`;
          toggleAddRemove({uid, itemId:'friedrice', price: item.price, label:item.name, thumbnail: item.thumbnail}, addBtn);
        });
      } else if(item.id === 'angwamo'){
        // tiers
        const tierSel = document.createElement('select'); tierSel.className='select';
        item.tiers.forEach(t => tierSel.innerHTML += `<option value="${t.key}">${t.label} • GHC ${t.price}</option>`);
        actions.appendChild(tierSel);
        const priceTag = document.createElement('div'); priceTag.className='price-tag'; priceTag.textContent = 'GHC ' + item.tiers[0].price;
        actions.appendChild(priceTag);
        const addBtn = document.createElement('button'); addBtn.className='add-btn'; addBtn.textContent='Add';
        actions.appendChild(addBtn);
        tierSel.addEventListener('change', ()=> priceTag.textContent = 'GHC ' + item.tiers.find(t=>t.key===tierSel.value).price);
        addBtn.addEventListener('click', ()=>{
          const tier = item.tiers.find(t=>t.key===tierSel.value);
          const uid = `angwamo::${tier.key}`;
          toggleAddRemove({uid, itemId:'angwamo', price:tier.price, label:`Angwamo • ${tier.label}`, thumbnail:item.thumbnail}, addBtn);
        });

      } else if(item.id === 'noodles'){
        const priceTag = document.createElement('div'); priceTag.className='price-tag'; priceTag.textContent = 'GHC ' + item.price;
        actions.appendChild(priceTag);
        const addBtn = document.createElement('button'); addBtn.className='add-btn'; addBtn.textContent='Add';
        actions.appendChild(addBtn);
        addBtn.addEventListener('click', ()=>{
          const uid = `noodles::std`;
          toggleAddRemove({uid, itemId:'noodles', price:item.price, label:item.name, thumbnail:item.thumbnail}, addBtn);
        });
      }
    });
  }

  /* Toggle Add/Remove behavior per requirement:
     - clicking Add adds one unit to cart and button becomes Remove
     - clicking Remove removes that uid from cart (all qty) and button goes back to Add
     - quantities can be changed inside cart
  */
  function toggleAddRemove(itemMeta, btnEl){
    const idx = findCartIndex(itemMeta.uid);
    if(idx === -1){
      // add 1
      state.cart.push({...itemMeta, qty:1});
      btnEl.textContent = 'Remove';
      btnEl.classList.remove('add-btn'); btnEl.classList.add('remove-btn');
    } else {
      // remove the entire entry
      state.cart.splice(idx,1);
      btnEl.textContent = 'Add';
      btnEl.classList.remove('remove-btn'); btnEl.classList.add('add-btn');
    }
    updateCartBadge();
    renderCart();
  }

  /* Render cart items + promo application */
  function renderCart(){
    const body = $('#cartBody');
    const footer = $('#cartFooter');
    body.innerHTML = '';
    if(state.cart.length === 0){
      body.innerHTML = `<div class="empty-cart">Your cart is empty. Add something tasty!</div>`;
      footer.innerHTML = '';
      updateCartBadge();
      return;
    }

    // Items list
    state.cart.forEach(ci=>{
      const el = document.createElement('div');
      el.className = 'cart-item';
      el.innerHTML = `
        <div class="ci-thumb"><img src="${ci.thumbnail}" alt="${ci.label}" style="width:100%;height:100%;object-fit:cover"></div>
        <div class="ci-meta">
          <div style="display:flex;justify-content:space-between;align-items:center">
            <div class="ci-label">${ci.label}</div>
            <div class="ci-price">GHC ${ci.price}</div>
          </div>
          <div class="ci-sub muted">Item</div>
        </div>
        <div class="ci-controls">
          <button class="qty-btn dec" data-uid="${ci.uid}"><i class="fa-solid fa-minus"></i></button>
          <div class="qty">${ci.qty}</div>
          <button class="qty-btn inc" data-uid="${ci.uid}"><i class="fa-solid fa-plus"></i></button>
        </div>
      `;
      body.appendChild(el);
    });

    // Promo logic
    // 1) Shawarma buy 2 get 1 free -> standard buy 2 get 1 free (i.e., for every 3, 1 free)
    const shawarmas = state.cart.filter(c=>c.itemId === 'shawarma');
    const shawQty = shawarmas.reduce((s,i)=>s+i.qty,0);
    let promoDiscount = 0;
    let promoLines = [];

    if(shawQty >= 3){
      // freeCount = floor(q / 3)
      const freeCount = Math.floor(shawQty / 3);
      // determine price of cheapest shawarma in cart (to discount)
      const unitPrices = [];
      shawarmas.forEach(s => {
        for(let i=0;i<s.qty;i++) unitPrices.push(s.price);
      });
      unitPrices.sort((a,b)=>a-b);
      const discountPer = unitPrices[0] || 0;
      promoDiscount = clamp2(discountPer * freeCount);
      promoLines.push({label:`Promo discount — Free Shawarma x${freeCount}`, amount: -promoDiscount});
    } else if (shawQty > 0) {
      const missing = 3 - (shawQty % 3 || 3);
      // show microcopy
      promoLines.push({label:`Add ${missing} more Shawarma to get 1 free.`, note:true, missing});
    }

    // 2) Loaded Fries -> every fries adds a free coke (free line item)
    const friesItems = state.cart.filter(c=>c.itemId === 'fries');
    if(friesItems.length > 0){
      // for each fries item, show "Free Coke" added
      promoLines.push({label:`Free Coke added for Loaded Fries`, amount: 0});
    }

    // compute subtotal
    const subtotal = state.cart.reduce((s,i)=>s + i.price * i.qty, 0);

    // build footer
    footer.innerHTML = '';
    const subtotalRow = document.createElement('div');
    subtotalRow.className = 'total-row';
    subtotalRow.innerHTML = `<div class="muted">Subtotal</div><div>GHC ${clamp2(subtotal)}</div>`;
    footer.appendChild(subtotalRow);

    promoLines.forEach(pl=>{
      const r = document.createElement('div');
      r.className = 'total-row';
      if(pl.note){
        r.innerHTML = `<div class="muted">${pl.label}</div><div><button class="small-btn add-missing" data-missing="${pl.missing}">Add missing items</button></div>`;
      } else {
        r.innerHTML = `<div class="muted">${pl.label}</div><div>${pl.amount < 0 ? '−GHC ' + Math.abs(clamp2(pl.amount)).toFixed(2) : 'GHC ' + clamp2(pl.amount).toFixed(2)}</div>`;
      }
      footer.appendChild(r);
    });

    // discount row if any
    if(promoDiscount > 0){
      const discRow = document.createElement('div');
      discRow.className = 'total-row';
      discRow.innerHTML = `<div class="muted">Discount</div><div class="danger">−GHC ${clamp2(promoDiscount)}</div>`;
      footer.appendChild(discRow);
    }

    const total = clamp2(subtotal - promoDiscount);
    const totalRow = document.createElement('div');
    totalRow.className = 'total-row';
    totalRow.style.fontWeight='800';
    totalRow.innerHTML = `<div>Total</div><div>GHC ${total}</div>`;
    footer.appendChild(totalRow);

    // checkout buttons
    const checkoutWrap = document.createElement('div');
    checkoutWrap.style.marginTop = '12px';
    checkoutWrap.innerHTML = `
      <button id="checkoutBtn" class="btn primary" style="width:100%;padding:12px;border-radius:12px"><i class="fa-solid fa-money-bill-wave"></i> Checkout</button>
      <button id="clearCart" class="btn ghost" style="width:100%;margin-top:8px;padding:10px;border-radius:12px"><i class="fa-solid fa-trash"></i> Clear Cart</button>
    `;
    footer.appendChild(checkoutWrap);

    updateCartBadge();

    // wire events in cart
    $$('.inc', body).forEach(b => b.onclick = () => { changeQty(b.dataset.uid, +1); });
    $$('.dec', body).forEach(b => b.onclick = () => { changeQty(b.dataset.uid, -1); });
    $$('.add-missing', footer).forEach(b => {
      b.onclick = () => {
        const missing = Number(b.dataset.missing);
        addMissingShawarma(missing);
      };
    });
    $('#clearCart').onclick = () => { state.cart = []; renderCart(); syncMenuButtons(); };
    $('#checkoutBtn').onclick = () => {
      alert('Checkout flow not connected. You can copy order details from cart and WhatsApp to place order.');
    };
  }

  function changeQty(uid, delta){
    const idx = findCartIndex(uid);
    if(idx === -1) return;
    state.cart[idx].qty += delta;
    if(state.cart[idx].qty <= 0){
      // remove entirely & change menu button back
      const removed = state.cart.splice(idx,1)[0];
      syncMenuButtons();
    }
    renderCart();
  }

  function addMissingShawarma(missing){
    // Find cheapest shawarma configuration in menu (small + no meat or small+chicken) -> prefer small+chicken if that's realistic but we'll add lite + chicken for a nice UX
    const size = MENU_ITEMS.find(m=>m.id==='shawarma').sizes[0].key;
    const protein = 'chicken';
    const uid = `shawarma::${size}::${protein}`;
    const price = calcShawarmaPrice(size, protein);
    const idx = findCartIndex(uid);
    if(idx === -1){
      state.cart.push({uid, itemId:'shawarma', price, label:makeShawarmaLabel(size, protein), thumbnail:'thumb-shawarma.jpg', qty: missing});
    } else {
      state.cart[idx].qty += missing;
    }
    renderCart();
    syncMenuButtons();
  }

  /* After cart change, we should sync Add/Remove buttons in menu */
  function syncMenuButtons(){
    // For each add/remove button in menu, determine if the uid present in cart
    const actionWrappers = $$('.menu-actions');
    actionWrappers.forEach(wrap => {
      const id = wrap.dataset.id;
      // locate button inside
      const btn = wrap.querySelector('button');
      if(!btn) return;
      // build uid from inputs when possible
      if(id === 'shawarma'){
        const sizeSel = wrap.querySelector('select:nth-of-type(1)');
        const protSel = wrap.querySelector('select:nth-of-type(2)');
        const uid = `shawarma::${sizeSel.value}::${protSel.value}`;
        const present = state.cart.some(c=>c.uid===uid);
        if(present){ btn.textContent='Remove'; btn.classList.remove('add-btn'); btn.classList.add('remove-btn'); }
        else { btn.textContent='Add'; btn.classList.remove('remove-btn'); btn.classList.add('add-btn'); }
      } else if(id === 'fries'){
        const portionSel = wrap.querySelector('select');
        const addonKeys = Array.from(wrap.querySelectorAll('.small-btn.active')).map(b=>b.dataset.key).sort().join(',');
        const uid = `fries::${portionSel.value}::${addonKeys}`;
        const present = state.cart.some(c=>c.uid===uid);
        if(present){ btn.textContent='Remove'; btn.classList.remove('add-btn'); btn.classList.add('remove-btn'); }
        else { btn.textContent='Add'; btn.classList.remove('remove-btn'); btn.classList.add('add-btn'); }
      } else if(id === 'friedrice'){ const uid='friedrice::std'; toggleBtnState(btn, uid); }
      else if(id === 'angwamo'){ const select = wrap.querySelector('select'); const uid=`angwamo::${select.value}`; toggleBtnState(btn, uid); }
      else if(id === 'noodles'){ toggleBtnState(btn, 'noodles::std'); }
    });
  }
  function toggleBtnState(btn, uid){
    const present = state.cart.some(c=>c.uid===uid);
    if(present){ btn.textContent='Remove'; btn.classList.remove('add-btn'); btn.classList.add('remove-btn'); }
    else { btn.textContent='Add'; btn.classList.remove('remove-btn'); btn.classList.add('add-btn'); }
  }

  /* Event: when user removes from menu (remove button), sync cart */
  function wireMenuBtnGlobal(){
    document.addEventListener('click', function(e){
      const t = e.target.closest('button');
      if(!t) return;
      // if it's a remove-btn (menu)
      if(t.classList.contains('remove-btn')){
        // try to infer uid from surrounding .menu-actions
        const wrapper = t.closest('.menu-actions');
        if(!wrapper) return;
        const id = wrapper.dataset.id;
        let uid;
        if(id === 'shawarma'){
          const sizeSel = wrapper.querySelector('select:nth-of-type(1)').value;
          const protSel = wrapper.querySelector('select:nth-of-type(2)').value;
          uid = `shawarma::${sizeSel}::${protSel}`;
        } else if(id === 'fries'){
          const portionSel = wrapper.querySelector('select').value;
          const addonKeys = Array.from(wrapper.querySelectorAll('.small-btn.active')).map(b=>b.dataset.key).sort().join(',');
          uid = `fries::${portionSel}::${addonKeys}`;
        } else if(id === 'friedrice') uid = 'friedrice::std';
        else if(id === 'angwamo') uid = `angwamo::${wrapper.querySelector('select').value}`;
        else if(id === 'noodles') uid = 'noodles::std';
        if(uid){
          const idx = findCartIndex(uid);
          if(idx !== -1){
            state.cart.splice(idx,1);
            renderCart();
            syncMenuButtons();
          }
        }
      }
    });
  }

  /* --- hero slideshow logic --- */
  function initSlideshow(){
    const slides = $$('.slide');
    let idx = 0;
    const show = (i) => {
      slides.forEach(s => s.style.opacity = '0');
      slides.forEach(s => s.style.transform = 'translateY(12px)');
      slides[i].style.opacity = '1';
      slides[i].style.transform = 'translateY(0)';
      // dots
      $$('#dots button').forEach(b=>b.classList.remove('active'));
      const dots = $$('#dots button');
      if(dots[i]) dots[i].classList.add('active');
    };
    // build dots
    const dotsWrap = $('#dots');
    slides.forEach((s,ii)=> {
      const b = document.createElement('button');
      b.onclick = ()=>{ idx = ii; show(idx); resetAuto(); };
      dotsWrap.appendChild(b);
    });

    show(idx);
    let auto = setInterval(()=>{ idx = (idx+1) % slides.length; show(idx); }, 5000);
    function resetAuto(){ clearInterval(auto); auto = setInterval(()=>{ idx = (idx+1) % slides.length; show(idx); }, 5000); }
    $('#prevSlide').onclick = ()=>{ idx = (idx-1+slides.length)%slides.length; show(idx); resetAuto(); };
    $('#nextSlide').onclick = ()=>{ idx = (idx+1)%slides.length; show(idx); resetAuto(); };
  }

  /* --- Promo modal + countdown to next Tuesday 12:00 --- */
  function showPromoModalIfNeeded(){
    const hidden = localStorage.getItem('hidePromoModal');
    if(hidden === '1') return;
    // show modal
    setTimeout(()=> {
      $('#promoModal').classList.add('show');
      $('#promoModal').setAttribute('aria-hidden','false');
    }, 800);
  }
  function closePromoModal(){
    $('#promoModal').classList.remove('show');
    $('#promoModal').setAttribute('aria-hidden','true');
  }
  window.closePromoModal = closePromoModal;
  $('#promoClose')?.addEventListener('click', closePromoModal);
  $('#dontShowPromo')?.addEventListener('click', ()=>{
    localStorage.setItem('hidePromoModal','1');
    closePromoModal();
  });

  function promoCountdownTick(){
    // next Tuesday 12:00 (local)
    const now = new Date();
    const day = now.getDay(); // 0 sunday, 2 tuesday
    // compute days until next Tuesday: (2 - day + 7) %7 -> if today is tuesday, we'll set to next week's tuesday
    let diff = (2 - day + 7) % 7;
    if(diff === 0){ // today is tuesday -> set to next tuesday
      diff = 7;
    }
    const next = new Date(now.getFullYear(), now.getMonth(), now.getDate()+diff, 12,0,0);
    const ms = next - now;
    const days = Math.floor(ms / (1000*60*60*24));
    const hrs = Math.floor((ms % (1000*60*60*24)) / (1000*60*60));
    const mins = Math.floor((ms % (1000*60*60)) / (1000*60));
    const secs = Math.floor((ms % (1000*60)) / 1000);
    $('#promoCountdown').textContent = `Next promo in ${days}d ${hrs}h ${mins}m`;
  }

  /* --- small UI wiring --- */
  function wireUI(){
    // hamburger toggle
    $('#hamburger').addEventListener('click', ()=>{
      const nav = $('#mobileNav');
      if(nav.style.display === 'flex'){ nav.style.display = 'none'; nav.setAttribute('aria-hidden','true'); }
      else { nav.style.display = 'flex'; nav.setAttribute('aria-hidden','false'); nav.style.flexDirection = 'column'; }
    });

    // cart open/close
    $('#cartBtn').addEventListener('click', openCart);
    $('#closeCart').addEventListener('click', closeCart);

    // click outside cart to close
    document.addEventListener('click', (e)=>{
      if(e.target.closest('.cart-panel') || e.target.closest('#cartBtn')) return;
      closeCart();
    });

    // render buttons after any change
    document.addEventListener('change', syncMenuButtons);
    document.addEventListener('click', ()=> setTimeout(syncMenuButtons,120));
  }

  /* Initialize everything */
  function init(){
    renderMenu();
    wireMenuBtnGlobal();
    initSlideshow();
    wireUI();
    showPromoModalIfNeeded();
    promoCountdownTick();
    setInterval(promoCountdownTick, 60*1000);
  }

  // expose utilities
  window.syncMenuButtons = syncMenuButtons;
  window.openCart = openCart;

  // wait DOM ready
  document.addEventListener('DOMContentLoaded', init);
})();
  </script>
</body>
</html>
