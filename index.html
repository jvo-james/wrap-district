<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>Wrap District — Hero</title>

  <!-- Fonts -->
  <link href="https://fonts.googleapis.com/css2?family=Montserrat:wght@400;600;800&family=Playfair+Display:wght@600;700&display=swap" rel="stylesheet">
<!-- ======= HEAD: fonts, icons & basic meta ======= -->
<meta charset="utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1, viewport-fit=cover">
<meta name="theme-color" content="#D92B2B">

<!-- Preconnect for faster Google Fonts loading -->
<link rel="preconnect" href="https://fonts.googleapis.com">
<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>

<!-- Google Fonts: Inter (UI) + Montserrat (display) -->
<link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;600;700;800;900&family=Montserrat:wght@600;700;900&display=swap" rel="stylesheet">

<!-- Font Awesome (icons) -->
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">

<!-- Optional: favicon / touch icon (replace file names with yours) -->
<link rel="icon" href="logo.svg" type="image/svg+xml">
<link rel="shortcut icon" href="favicon.ico" type="image/x-icon">
<link rel="apple-touch-icon" href="logo-152.png">

<!-- Optional: small CSS reset (very small) -->
<style>/* tiny reset to ensure consistent rendering */html,body{height:100%;margin:0;padding:0}button{appearance:none;-webkit-appearance:none}</style>
<!-- ======= end head ======= -->
  <style>
/* ==========================================================================
   WRAP DISTRICT — COMPLETE STYLESHEET
   Purpose: Styles for the HTML body and script you provided.
   Design: warm, appetizing palette (reds, golds, creams), premium glass & glow,
   highly responsive with polished animations. Modal backgrounds are opaque and
   [hidden] elements are fully hidden (prevents modals showing on refresh).
   ========================================================================== */

/* =========================
   THEME VARIABLES
   ========================= */
:root{
  --bg-900: #0b0b0c;
  --panel-900: rgba(12,12,12,0.6);
  --accent-red: #D92B2B;
  --accent-red-700: #B21E1E;
  --accent-gold: #FFB400;
  --accent-gold-2: #FFC95C;
  --muted: #cfcfcf;
  --muted-2: #9ea0a5;
  --glass-01: rgba(255,255,255,0.03);
  --glass-02: rgba(255,255,255,0.015);
  --shadow-soft: 0 16px 46px rgba(0,0,0,0.48);
  --shadow-deep: 0 30px 120px rgba(0,0,0,0.72);
  --radius-xl: 20px;
  --radius-lg: 14px;
  --radius-md: 10px;
  --ease: cubic-bezier(.2,.9,.25,1);
  --max-width: 1180px;
  --header-height: 72px;
  --glass-border: rgba(255,255,255,0.04);
  --focus-ring: rgba(255,191,0,0.16);
  --success: #17b57b;
  --danger: #d9534f;
  --text: #f7f7f7;
}

/* =========================
   RESET & BASE
   ========================= */
*{box-sizing:border-box}
html,body{height:100%;margin:0;padding:0;font-family:Inter, system-ui, -apple-system, "Segoe UI", Roboto, "Helvetica Neue", Arial;color:var(--text);background:
  radial-gradient(800px 300px at 10% 0%, rgba(255,190,0,0.02), transparent 6%),
  linear-gradient(180deg, #070707 0%, #0b0b0b 100%);-webkit-font-smoothing:antialiased; -moz-osx-font-smoothing:grayscale; }
img{display:block;max-width:100%;height:auto}
a{text-decoration:none;color:inherit}
ul{list-style:none;margin:0;padding:0}
button{font-family:inherit;cursor:pointer;border:0;background:none}

/* Ensure elements with [hidden] are actually hidden even if other rules attempt to show them */
[hidden] {
  display: none !important;
  visibility: hidden !important;
  opacity: 0 !important;
  pointer-events: none !important;
}

/* Basic container */
.container{max-width:var(--max-width);margin:0 auto;padding:0 18px}

/* Utility helpers */
.flex{display:flex}
.center{display:flex;align-items:center;justify-content:center}
.col{display:flex;flex-direction:column}
.row{display:flex;align-items:center}
.rounded{border-radius:12px}
.small{font-size:13px}
.muted{color:var(--muted)}
.muted-2{color:var(--muted-2)}
.text-cap{letter-spacing:0.6px;text-transform:uppercase;font-weight:700;font-size:12px}

/* No scroll helper used by JS when modals open */
.no-scroll, .no-scroll body, html.no-scroll { overflow: hidden !important; height: 100% !important; }

/* =========================
   HEADER — sticky, minimal mobile
   ========================= */
.site-header{
  position:sticky;
  top:0;
  z-index:1200;
  height:var(--header-height);
  display:flex;
  align-items:center;
  background: linear-gradient(180deg, rgba(11,11,12,0.88), rgba(11,11,12,0.82));
  border-bottom: 1px solid rgba(255,255,255,0.03);
  backdrop-filter: blur(6px);
  padding: 10px 0;
}
.header-inner{display:flex;align-items:center;justify-content:space-between;width:100%;gap:12px}
.brand{display:flex;align-items:center;gap:12px}
.site-logo{width:56px;height:56px;border-radius:12px;object-fit:cover}
.brand-title{font-weight:900;color:var(--accent-red);letter-spacing:0.6px}
.brand-tag{font-size:12px;color:var(--muted)}
.main-nav{display:flex;align-items:center}
.nav-list{display:flex;gap:12px;align-items:center;margin:0;padding:0}
.nav-link{padding:8px 12px;border-radius:10px;color:var(--muted);font-weight:800;transition:all 220ms var(--ease)}
.nav-link:hover{color:var(--text);transform:translateY(-3px);background:rgba(255,255,255,0.02)}
.header-actions{display:flex;gap:8px;align-items:center}
.icon-btn{display:inline-flex;align-items:center;justify-content:center;border-radius:10px;padding:8px;color:var(--text);background:transparent;transition:transform 240ms}
.icon-btn:hover{transform:translateY(-4px)}
.btn{display:inline-flex;align-items:center;gap:10px;padding:10px 14px;border-radius:12px;font-weight:900}
.btn-cta{background:linear-gradient(90deg,var(--accent-gold),var(--accent-gold-2));color:#111;box-shadow:0 16px 48px rgba(255,184,28,0.12)}
.btn-outline{background:transparent;border:1px solid rgba(255,255,255,0.03);color:var(--text)}
.cart-badge{display:inline-grid;place-items:center;min-width:20px;height:20px;padding:0 8px;border-radius:999px;background:linear-gradient(90deg,var(--accent-gold),var(--accent-gold-2));color:#111;font-weight:900;font-size:13px;box-shadow:0 12px 30px rgba(255,191,0,0.12)}
.cart-badge.pulse{animation:cartPulse 900ms ease}
@keyframes cartPulse{0%{transform:scale(1)}30%{transform:scale(1.18)}100%{transform:scale(1)}}

/* Mobile: only show logo, cart, hamburger */
@media (max-width:720px){
  .main-nav{display:none}
  .nav-link{display:none}
  .brand-title{display:none}
  .header-actions{gap:6px}
  .site-logo{width:48px;height:48px}
}

/* =========================
   HERO — premium animations & layout
   ========================= */
.hero-section{padding:22px 0 36px}
.hero-inner{display:grid;gap:20px;align-items:stretch;grid-template-columns:1fr}
.hero-left{position:relative;padding:18px;border-radius:18px;background:linear-gradient(180deg, rgba(255,255,255,0.02), rgba(0,0,0,0.03));border:1px solid rgba(255,255,255,0.02);box-shadow:var(--shadow-soft);overflow:visible}
.hero-bg-layer{position:absolute;inset:0;pointer-events:none;opacity:0.06;filter:blur(36px);transform:translateZ(0)}
.hero-carousel{position:relative;z-index:4}
.hero-slide{position:relative;border-radius:14px;padding:14px;display:grid;grid-template-columns:1fr;gap:14px;align-items:start;transition:opacity 520ms var(--ease), transform 520ms var(--ease), filter 520ms}
.hero-slide[aria-hidden="true"]{opacity:0;pointer-events:none;transform:translateY(18px) scale(0.996) blur(2px)}
.hero-slide[aria-hidden="false"]{opacity:1;transform:translateY(0) scale(1);filter:none}
.slide-overlay{position:relative;z-index:8;max-width:56%}
.eyebrow{display:flex;align-items:center;gap:10px;margin-bottom:8px}
.badge{padding:6px 10px;border-radius:999px;font-weight:900;font-size:12px}
.tag-hot{background:linear-gradient(90deg,var(--accent-red),var(--accent-red-700));color:#fff}
.tag-popular{background:linear-gradient(90deg,#ff9150,#ff6b6b);color:#111}
.tag-new{background:linear-gradient(90deg,#7ef9b2,#5ef2a1);color:#111}
.hero-title{font-family:Montserrat, sans-serif;font-size:30px;line-height:1.02;margin:6px 0;color:var(--text);text-shadow:0 10px 40px rgba(0,0,0,0.6)}
.hero-sub{color:var(--muted);margin:0 0 12px;font-size:14px}
.hero-cta{display:flex;gap:10px;margin-top:10px}
.hero-ingredients{display:flex;gap:10px;margin-top:12px}
.ingredient-item{display:inline-grid;place-items:center;width:44px;height:44px;border-radius:11px;background:linear-gradient(180deg, rgba(255,255,255,0.02), rgba(255,255,255,0.008));border:1px solid rgba(255,255,255,0.02);box-shadow:0 8px 30px rgba(0,0,0,0.45);transition:transform 420ms var(--ease)}
.ingredient-item:hover{transform:translateY(-8px) scale(1.03)}

/* slide media as background card */
.slide-media{height:320px;border-radius:14px;background-size:cover;background-position:center;border:1px solid rgba(255,255,255,0.02);box-shadow:0 40px 120px rgba(0,0,0,0.6);transition:transform 720ms var(--ease), filter 720ms var(--ease)}
.hero-slide:hover .slide-media{transform:scale(1.03)}

/* carousel controls */
.carousel-controls{display:flex;gap:12px;align-items:center;margin-top:12px}
.carousel-prev,.carousel-next{background:rgba(0,0,0,0.45);border-radius:999px;padding:10px;color:var(--text);box-shadow:0 12px 36px rgba(0,0,0,0.5)}
.carousel-dots{display:flex;gap:8px}
.carousel-dots .dot{width:10px;height:10px;border-radius:999px;background:rgba(255,255,255,0.06);border:1px solid rgba(255,255,255,0.02);cursor:pointer;transition:transform 240ms}
.carousel-dots .dot.active{transform:scale(1.5);background:linear-gradient(90deg,var(--accent-gold),var(--accent-gold-2));box-shadow:0 10px 30px rgba(255,191,0,0.12)}

/* right column quick picks */
.hero-right{padding:12px}
.featured-card{padding:12px;border-radius:12px;background:linear-gradient(180deg, rgba(255,255,255,0.02), rgba(255,255,255,0.008));border:1px solid rgba(255,255,255,0.02);box-shadow:var(--shadow-soft)}
.featured-title{font-weight:900;font-size:18px}
.quick-picks{display:flex;flex-direction:column;gap:12px;margin-top:12px}
.pick{display:flex;align-items:center;gap:12px;padding:10px;border-radius:12px;background:linear-gradient(180deg, rgba(255,255,255,0.01), rgba(255,255,255,0.006));border:1px solid rgba(255,255,255,0.02)}
.pick-media{width:64px;height:64px;border-radius:10px;background-size:cover;background-position:center;border:1px solid rgba(255,255,255,0.02);box-shadow:0 14px 46px rgba(0,0,0,0.5)}
.pick strong{font-weight:900}
.pick .muted{font-size:13px;color:var(--muted)}

/* mini-cart */
.mini-cart{margin-top:14px;padding-top:12px;border-top:1px dashed rgba(255,255,255,0.02)}
.mini-cart-row{display:flex;justify-content:space-between;align-items:center}

/* ATTRACTIVE FLOATING GLASS RINGS behind hero */
.hero-left::before, .hero-left::after {
  content:"";position:absolute;inset:auto -10% -10% -10%;z-index:1;pointer-events:none;filter:blur(40px);opacity:0.06;
}
.hero-left::before{background:radial-gradient(600px 200px at 10% 10%, rgba(255,191,0,0.12), transparent 12%);transform:translateY(-12px)}
.hero-left::after{background:radial-gradient(900px 320px at 90% 80%, rgba(217,48,42,0.06), transparent 15%);transform:translateY(12px)}

/* hero floating animation (media) */
@keyframes floatSlow { 0%{transform:translateY(0)}50%{transform:translateY(-8px)}100%{transform:translateY(0)} }
.slide-media{animation: floatSlow 8s ease-in-out infinite}

/* =========================
   PROMO — radiant collage
   ========================= */
.promo-radiant{margin-top:18px;padding:18px;border-radius:18px;background:linear-gradient(180deg, rgba(255,255,255,0.02), rgba(0,0,0,0.02));border:1px solid rgba(255,255,255,0.02);box-shadow:var(--shadow-soft)}
.promo-left{padding:12px}
.promo-badge{display:inline-block;padding:8px 12px;border-radius:999px;background:linear-gradient(90deg,var(--accent-red),#ff6b6b);color:#fff;font-weight:900}
.promo-title{font-weight:900;font-size:20px;margin:8px 0}
.promo-actions{display:flex;gap:10px;margin-top:12px}
.promo-collage{position:relative;height:220px;width:100%;display:grid;place-items:center}
.collage-item{position:absolute;border-radius:14px;background-size:cover;background-position:center;border:4px solid rgba(255,255,255,0.04);box-shadow:0 40px 90px rgba(0,0,0,0.6);transition:transform 900ms var(--ease)}
.collage-item.big{width:240px;height:240px;right:6px;top:-16px;transform:rotate(-6deg);z-index:3}
.collage-item.medium{width:160px;height:160px;left:6px;top:20px;transform:rotate(6deg);z-index:2}
.collage-item.small{width:100px;height:100px;left:80px;bottom:10px;transform:rotate(-4deg);z-index:4}
.promo-glow .collage-item{transform:translateY(-10px) rotate(0);filter:drop-shadow(0 40px 80px rgba(255,191,0,0.06))}

/* sparkle */
.promo-sparkle{position:absolute;width:10px;height:10px;border-radius:999px;background:radial-gradient(circle, rgba(255,255,255,0.95), rgba(255,255,255,0.02));opacity:0.4;filter:blur(6px)}

/* =========================
   MENU GRID
   ========================= */
.menu-section{padding:20px 0 46px}
.section-head{margin-bottom:14px}
.section-title{font-size:20px;font-weight:900}
.menu-filters{display:flex;gap:10px;flex-wrap:wrap;margin-bottom:18px}
.filter{padding:8px 12px;border-radius:999px;background:transparent;border:1px solid rgba(255,255,255,0.02);cursor:pointer;color:var(--muted);font-weight:800}
.filter.active{background:linear-gradient(90deg,var(--accent-gold),var(--accent-gold-2));color:#111;transform:translateY(-3px);box-shadow:0 14px 36px rgba(255,191,0,0.08)}
.menu-grid{display:grid;grid-template-columns:repeat(1,1fr);gap:14px}
.menu-item{display:flex;gap:12px;align-items:flex-start;padding:12px;border-radius:12px;background:linear-gradient(180deg, rgba(255,255,255,0.01), rgba(255,255,255,0.006));border:1px solid rgba(255,255,255,0.02);transition:transform 420ms var(--ease), box-shadow 420ms}
.menu-item:hover{transform:translateY(-8px);box-shadow:var(--shadow-deep)}
.thumb{width:140px;height:104px;border-radius:10px;background-size:cover;background-position:center;border:1px solid rgba(255,255,255,0.02);box-shadow:0 18px 60px rgba(0,0,0,0.55)}
.meta{flex:1;display:flex;flex-direction:column}
.name{font-weight:900;margin:0 0 6px}
.desc{color:var(--muted);margin:0 0 12px;font-size:14px}
.meta-line{display:flex;align-items:center;justify-content:space-between;gap:12px}
.meta-actions{display:flex;gap:8px;align-items:center}

/* =========================
   BUILDER MODAL (opaque background, premium)
   ========================= */
.modal.modal-builder{
  position:fixed;inset:0;z-index:1400;display:flex;align-items:center;justify-content:center;padding:24px;background:rgba(0,0,0,0.62);backdrop-filter:blur(4px);
}
.modal-shell{display:grid;grid-template-columns:1fr 380px;gap:14px;background:linear-gradient(180deg, rgba(255,255,255,0.02), rgba(255,255,255,0.01));border-radius:16px;padding:18px;border:1px solid rgba(255,255,255,0.03);box-shadow:0 60px 160px rgba(0,0,0,0.75);width:100%;max-width:1100px}
.modal-left{padding:6px}
.modal-right{padding:12px;border-left:1px dashed rgba(255,255,255,0.02)}
.modal-header{display:flex;align-items:center;justify-content:space-between;gap:10px;margin-bottom:12px}
.modal-header h3{font-size:18px;font-weight:900}
.modal-header .icon-btn{background:transparent;padding:6px;border-radius:8px}
.builder-stepper{display:flex;gap:8px;flex-wrap:wrap;margin-bottom:10px}
.builder-stepper .step{background:transparent;border:1px solid rgba(255,255,255,0.03);padding:8px 10px;border-radius:10px;cursor:pointer;color:var(--muted);font-weight:800}
.builder-stepper .step.active{background:linear-gradient(90deg,var(--accent-gold),var(--accent-gold-2));color:#111;box-shadow:0 18px 46px rgba(255,191,0,0.08)}
.builder-step-panel{padding:10px;min-height:140px;background:transparent;display:block}
.options-grid{display:flex;flex-wrap:wrap;gap:10px}
.option{padding:10px 12px;border-radius:12px;background:linear-gradient(180deg, rgba(255,255,255,0.01), rgba(255,255,255,0.006));border:1px solid rgba(255,255,255,0.02);cursor:pointer;transition:transform 220ms var(--ease)}
.option:hover{transform:translateY(-6px);box-shadow:0 20px 46px rgba(0,0,0,0.55)}
.option.selected{background:linear-gradient(90deg,var(--accent-gold),var(--accent-gold-2));color:#111;font-weight:900}

/* preview right */
.live-preview{display:flex;flex-direction:column;gap:12px}
.preview-image{height:160px;border-radius:12px;background-size:cover;background-position:center;border:1px solid rgba(255,255,255,0.02);box-shadow:0 30px 80px rgba(0,0,0,0.6)}
.preview-title{font-weight:900;margin:6px 0}
.preview-meta{display:flex;align-items:center;justify-content:space-between;gap:12px}
.preview-price{font-weight:900;color:var(--accent-gold);font-size:18px}

/* qty controls */
.preview-qty{display:flex;align-items:center;gap:8px}
.icon-btn.qty-dec, .icon-btn.qty-inc{padding:8px;border-radius:8px;background:transparent;border:1px solid rgba(255,255,255,0.03)}

/* delivery address input if used */
.delivery-address input{width:100%;padding:10px;border-radius:10px;border:1px solid rgba(255,255,255,0.03);background:transparent;color:var(--text)}

/* =========================
   CART DRAWER — slide in from right (opaque overlay)
   ========================= */
.drawer.cart-drawer{
  position:fixed;right:0;top:0;height:100%;width:100%;max-width:420px;background:linear-gradient(180deg,#0f0f10,#141417);z-index:1500;border-left:1px solid rgba(255,255,255,0.03);box-shadow:0 60px 160px rgba(0,0,0,0.84);transition:transform 360ms var(--ease);
}
.drawer-shell{display:flex;flex-direction:column;height:100%;padding:18px}
.drawer-head{display:flex;align-items:center;justify-content:space-between;gap:12px;padding-bottom:12px;border-bottom:1px dashed rgba(255,255,255,0.02)}
.cart-body{overflow:auto;padding-top:12px;flex:1;display:flex;flex-direction:column;gap:12px}
.cart-items{list-style:none;padding:0;margin:0;display:flex;flex-direction:column;gap:12px}
.cart-item{padding:12px;border-radius:12px;background:linear-gradient(180deg, rgba(255,255,255,0.01), rgba(255,255,255,0.006));border:1px solid rgba(255,255,255,0.02)}
.cart-summary{border-top:1px dashed rgba(255,255,255,0.02);padding-top:12px}
.cart-row{display:flex;justify-content:space-between;align-items:center;padding:6px 0}

/* drawer close */
.drawer-close{background:transparent;padding:8px;border-radius:8px}

/* =========================
   CHAT WIDGET (Manef)
   ========================= */
.chat-widget{position:fixed;right:18px;bottom:18px;z-index:1600;display:flex;flex-direction:column;align-items:flex-end;gap:8px}
.chat-toggle{width:56px;height:56px;border-radius:999px;background:linear-gradient(90deg,var(--accent-red),var(--accent-red-700));border:none;color:#fff;box-shadow:0 18px 56px rgba(217,48,42,0.18);display:grid;place-items:center}
.chat-panel{width:320px;border-radius:12px;background:linear-gradient(180deg, rgba(255,255,255,0.02), rgba(255,255,255,0.01));border:1px solid rgba(255,255,255,0.03);box-shadow:0 40px 120px rgba(0,0,0,0.6)}
.chat-head{display:flex;align-items:center;gap:10px;padding:10px;border-bottom:1px solid rgba(255,255,255,0.02)}
.chat-avatar{width:44px;height:44px;border-radius:10px;background-size:cover;background-position:center;border:1px solid rgba(255,255,255,0.02)}
.chat-body{padding:10px;max-height:300px;overflow:auto}
.chat-msg{padding:10px 12px;border-radius:12px;margin-bottom:8px;max-width:82%}
.chat-msg.user{margin-left:auto;background:linear-gradient(90deg,var(--accent-gold),var(--accent-gold-2));color:#111;font-weight:700}
.chat-msg.bot{background:rgba(255,255,255,0.02);color:var(--text)}
.chat-foot{display:flex;gap:8px;padding:10px;border-top:1px solid rgba(255,255,255,0.02)}
.chat-input{flex:1;padding:10px;border-radius:10px;border:1px solid rgba(255,255,255,0.03);background:transparent;color:var(--text)}

/* =========================
   TESTIMONIALS / ABOUT / CONTACT / FOOTER
   ========================= */
.testimonials-section{padding:18px 0}
.testimonials-grid{display:grid;grid-template-columns:1fr;gap:12px}
.testimonial{background:linear-gradient(180deg, rgba(255,255,255,0.01), rgba(255,255,255,0.008));border:1px solid rgba(255,255,255,0.02);padding:12px;border-radius:12px}
.about-section{padding:20px 0}
.about-grid{display:grid;grid-template-columns:1fr;gap:12px;align-items:center}
.about-media{height:220px;border-radius:14px;background-size:cover;background-position:center;border:1px solid rgba(255,255,255,0.02);box-shadow:0 30px 80px rgba(0,0,0,0.6)}
.features-list{list-style:none;padding:0;margin:18px 0 0;display:flex;flex-direction:column;gap:12px}
.features-list li{display:flex;gap:12px;align-items:center;color:var(--muted)}

/* contact */
.contact-section{padding:18px 0}
.contact-card{padding:12px;border-radius:12px;background:linear-gradient(180deg, rgba(255,255,255,0.01), rgba(255,255,255,0.006));border:1px solid rgba(255,255,255,0.02)}
.map-placeholder{height:220px;border-radius:12px;background:linear-gradient(180deg, rgba(255,255,255,0.015), rgba(255,255,255,0.008));border:1px solid rgba(255,255,255,0.02)}

/* footer */
.site-footer{padding:28px 0;background:linear-gradient(180deg,#050505,#0a0a0a);border-top:1px solid rgba(255,255,255,0.02);margin-top:40px;color:var(--muted)}
.footer-inner{display:grid;grid-template-columns:repeat(1,1fr);gap:12px;align-items:start;padding-bottom:12px}
.footer-links{list-style:none;padding:0;margin:0;display:flex;flex-direction:column;gap:8px}
.socials{display:flex;gap:8px;margin-top:10px}
.newsletter-form{display:flex;gap:8px;margin-top:8px}
.newsletter-form input{flex:1;padding:10px;border-radius:10px;border:1px solid rgba(255,255,255,0.03);background:transparent;color:var(--text)}
.copyright{padding-top:12px;border-top:1px dashed rgba(255,255,255,0.02);margin-top:12px;text-align:center}

/* =========================
   ANIMATIONS & MICRO-INTERACTIONS
   ========================= */
@keyframes shimmer { 0%{background-position:-500px 0}100%{background-position:500px 0} }
.loading-shimmer{background:linear-gradient(90deg, rgba(255,255,255,0.02) 0%, rgba(255,255,255,0.06) 50%, rgba(255,255,255,0.02) 100%);background-size:1000px 100%;animation:shimmer 2.4s linear infinite}
@keyframes floatSlow { 0%{transform:translateY(0)}50%{transform:translateY(-8px)}100%{transform:translateY(0)} }
@keyframes pulseHighlight { 0%{box-shadow:none;transform:translateY(0)}30%{box-shadow:0 16px 48px rgba(217,48,42,0.08);transform:translateY(-6px)}100%{box-shadow:none;transform:translateY(0)} }
.pulse-highlight{animation:pulseHighlight 1200ms var(--ease) both}
.btn-cta::after{content:"";position:absolute;right:-40px;top:-40px;width:120px;height:120px;transform:rotate(30deg);opacity:0;transition:opacity 420ms, transform 420ms;background:radial-gradient(circle at 50% 50%, rgba(255,255,255,0.18), rgba(255,255,255,0.02) 40%, transparent 60%);pointer-events:none}
.btn-cta:hover::after{opacity:0.12;transform:translateX(-24px) rotate(20deg)}
.badge{animation: badgeFloat 4s ease-in-out infinite}
@keyframes badgeFloat {0%{transform:translateY(0)}50%{transform:translateY(-6px)}100%{transform:translateY(0)}}

/* =========================
   RESPONSIVE RULES
   ========================= */
/* Phones */
@media (max-width:720px){
  :root{--max-width:720px}
  .hero-inner{grid-template-columns:1fr}
  .slide-media{height:180px;border-radius:12px}
  .slide-overlay{max-width:100%}
  .hero-title{font-size:20px}
  .hero-sub{font-size:13px}
  .pick-media{width:52px;height:52px}
  .thumb{width:110px;height:82px}
  .modal-shell{grid-template-columns:1fr;max-width:640px;padding:12px;border-radius:12px}
  .modal-right{border-left:none;border-top:1px dashed rgba(255,255,255,0.02);margin-top:12px;padding-top:12px}
  .drawer.cart-drawer{max-width:100%;width:100%}
  .chat-panel{width:100%;max-width:420px}
  .promo-collage{height:160px}
  .collage-item.big{width:180px;height:180px}
  .footer-inner{grid-template-columns:1fr}
  .nav-link{display:none}
  .brand-title{display:none}
}

/* Tablets */
@media (min-width:721px) and (max-width:1024px){
  :root{--max-width:980px}
  .hero-inner{grid-template-columns:1fr 360px;gap:16px}
  .slide-media{height:240px}
  .menu-grid{grid-template-columns:repeat(2,1fr)}
  .modal-shell{grid-template-columns:1fr 360px}
  .testimonials-grid{grid-template-columns:repeat(2,1fr)}
}

/* Desktop */
@media (min-width:1025px){
  :root{--max-width:1180px}
  .hero-inner{grid-template-columns:1fr 420px;gap:28px}
  .slide-media{height:360px}
  .menu-grid{grid-template-columns:repeat(4,1fr)}
  .modal-shell{grid-template-columns:1fr 420px}
  .promo-inner{display:grid;grid-template-columns:1fr 420px;gap:18px}
  .about-grid{grid-template-columns:420px 1fr}
  .testimonials-grid{grid-template-columns:repeat(3,1fr)}
  .footer-inner{grid-template-columns:1fr 1fr 1fr;align-items:start}
}

/* Extra large */
@media (min-width:1400px){
  .slide-media{height:420px}
  .hero-title{font-size:34px}
  .collage-item.big{width:280px;height:280px}
}

/* =========================
   ACCESSIBILITY & POLISH
   ========================= */
:focus{outline:3px solid var(--focus-ring);outline-offset:2px}
button:focus, a:focus, input:focus, textarea:focus{outline:2px solid rgba(255,191,0,0.06);outline-offset:2px}
.visually-hidden{position:absolute;height:1px;width:1px;overflow:hidden;clip:rect(1px,1px,1px,1px);white-space:nowrap}

/* reduce motion preference */
@media (prefers-reduced-motion:reduce){
  *{animation-duration:0.001ms!important;animation-iteration-count:1!important;transition-duration:0.001ms!important;scroll-behavior:auto!important}
}

/* =========================
   SMALL HELPERS / VARIANTS (polish)
   ========================= */
.text-ellipsis{white-space:nowrap;overflow:hidden;text-overflow:ellipsis}
.hr-soft{height:1px;background:linear-gradient(90deg, rgba(255,255,255,0.02), transparent);border-radius:2px;margin:12px 0}
.card-base{background:linear-gradient(180deg, rgba(255,255,255,0.02), rgba(255,255,255,0.01));border:1px solid rgba(255,255,255,0.02);border-radius:12px;padding:12px}
.pulse{animation:cartPulse 900ms ease}

/* ensure any modal overlay we create is opaque */
.overlay-dim { position: fixed; inset:0; background: rgba(0,0,0,0.56); z-index: 1200; display:none; }
.overlay-dim.active { display:block; }

/* ensure modals & drawers are hidden by default on refresh even if JS or CSS misbehave */
.modal[hidden], .drawer[hidden], .chat-panel[hidden] {
  display: none !important;
  visibility: hidden !important;
  opacity: 0 !important;
  pointer-events: none !important;
}

/* =========================
   END
   ========================= */

/* NOTE:
 - This stylesheet ensures header is sticky, mobile header minimal, modals are opaque
   and hidden by default, the cart drawer is polished and the hero section is
   animated and premium.
 - If you want color tweaks (more red or more gold) tell me and I will tune the
   variables at the top (accent-red, accent-gold).
*/
</style>
</head>

  <body>

  <!-- ==============================
       STICKY HEADER (minimal on mobile: logo / cart / burger)
       Icons use icon classes (e.g. Font Awesome `fa fa-...`)
       ============================== -->
  <header class="site-header" role="banner" aria-label="Wrap District header">
    <div class="container header-inner">
      <!-- logo -->
      <a class="brand" href="/" aria-label="Wrap District home">
        <!-- use your repo-root logo file if you have it, otherwise this is placeholder text/logo -->
        <img src="logo.svg" alt="Wrap District logo" class="site-logo" width="56" height="56">
        <div class="brand-text">
          <strong class="brand-title">WRAP DISTRICT</strong>
        </div>
      </a>

      <!-- main nav (desktop) -->
      <nav class="main-nav" role="navigation" aria-label="Main menu">
        <ul class="nav-list" role="menubar">
          <li><a class="nav-link" href="#hero">Home</a></li>
          <li><a class="nav-link" href="#menu">Menu</a></li>
          <li><a class="nav-link" href="#promo">Promos</a></li>
          <li><a class="nav-link" href="#about">About</a></li>
        </ul>
      </nav>

      <!-- right-side actions -->
      <div class="header-actions" role="group" aria-label="Header actions">
        <!-- search (icon class only) -->
        <button class="icon-btn search-btn" type="button" aria-label="Search" title="Search">
          <i class="fa fa-search" aria-hidden="true"></i>
        </button>

        <!-- cart -->
        <button class="icon-btn cart-btn" type="button" aria-label="Open cart" data-action="open-cart" aria-haspopup="dialog" aria-expanded="false">
          <i class="fa fa-shopping-cart" aria-hidden="true"></i>
          <span class="cart-badge" id="cart-count" data-count="0" aria-live="polite">0</span>
        </button>

        <!-- hamburger (only visible on small screens via CSS) -->
        <button class="icon-btn hamburger" type="button" aria-label="Open menu" aria-controls="mobile-nav" aria-expanded="false">
          <i class="fa fa-bars" aria-hidden="true"></i>
        </button>
      </div>
    </div>
  </header>

  <!-- ==============================
       MAIN
       ============================== -->
  <main id="main" role="main">

    <!-- ==============================
         HERO — premium, animated, appetising
         - slideshow slides reference repo-root filenames
         - very light text, bold CTAs, ingredient icons
         ============================== -->
    <section id="hero" class="hero-section" aria-label="Featured">
      <div class="container hero-inner">

        <!-- slideshow / left column -->
        <div class="hero-left" role="region" aria-label="Featured carousel">
          <div class="hero-carousel" data-carousel aria-roledescription="carousel">
            <!-- Slide — Shawarma (filename contains 'shawarma') -->
            <article class="hero-slide active" data-slide="1" data-img="shawarma_hero.jpg" role="group" aria-label="Shawarma">
              <div class="slide-overlay">
                <div class="eyebrow">
                  <span class="badge tag-hot">Best Seller</span>
                </div>
                <h1 class="hero-title">Shawarma — Build your way</h1>
                <p class="hero-sub">Juicy. Saucy. Irresistible.</p>

                <div class="hero-cta">
                  <button class="btn btn-cta" data-action="open-builder" data-item="shawarma" aria-label="Build Shawarma">
                    <i class="fa fa-plus-circle" aria-hidden="true"></i> Build
                  </button>
                  <button class="btn btn-outline" data-action="quick-order" data-item="shawarma" aria-label="Quick order shawarma">
                    <i class="fa fa-bolt" aria-hidden="true"></i> Quick
                  </button>
                </div>

                <ul class="hero-ingredients" aria-hidden="false">
                  <li class="ingredient-item" title="Fresh veg"><i class="fa fa-leaf"></i></li>
                  <li class="ingredient-item" title="Melty cheese"><i class="fa fa-cheese"></i></li>
                  <li class="ingredient-item" title="Garlic sauce"><i class="fa fa-pepper-hot"></i></li>
                </ul>
              </div>

              <!-- slide media: uses your repo-root file named with 'shawarma' -->
              <div class="slide-media" role="img" aria-label="Shawarma image" data-img="shawarma_hero.jpg"></div>
            </article>

            <!-- Slide — Loaded Fries -->
            <article class="hero-slide" data-slide="2" data-img="loaded_fries_hero.jpg" role="group" aria-label="Loaded Fries" aria-hidden="true">
              <div class="slide-overlay">
                <div class="eyebrow">
                  <span class="badge tag-popular">Popular</span>
                </div>
                <h1 class="hero-title">Loaded Fries</h1>
                <p class="hero-sub">Cheesy. Crispy. Add toppings.</p>

                <div class="hero-cta">
                  <button class="btn btn-cta" data-action="open-builder" data-item="fries"><i class="fa fa-plus-circle"></i> Customize</button>
                  <button class="btn btn-outline" data-action="quick-order" data-item="fries"><i class="fa fa-bolt"></i> Quick</button>
                </div>

                <ul class="hero-ingredients" aria-hidden="false">
                  <li class="ingredient-item" title="Bacon"><i class="fa fa-bacon"></i></li>
                  <li class="ingredient-item" title="Cheese"><i class="fa fa-cheese"></i></li>
                </ul>
              </div>

              <div class="slide-media" role="img" aria-label="Loaded fries image" data-img="loaded_fries_hero.jpg"></div>
            </article>

            <!-- Slide — Angwamo -->
            <article class="hero-slide" data-slide="3" data-img="angwamo_hero.jpg" role="group" aria-label="Angwamo" aria-hidden="true">
              <div class="slide-overlay">
                <div class="eyebrow">
                  <span class="badge tag-new">New</span>
                </div>
                <h1 class="hero-title">Loaded Angwamo</h1>
                <p class="hero-sub">Comfort food, elevated.</p>

                <div class="hero-cta">
                  <button class="btn btn-cta" data-action="open-builder" data-item="angwamo"><i class="fa fa-plus-circle"></i> Build</button>
                  <button class="btn btn-outline" data-action="quick-order" data-item="angwamo"><i class="fa fa-bolt"></i> Quick</button>
                </div>
              </div>

              <div class="slide-media" role="img" aria-label="Angwamo image" data-img="angwamo_hero.jpg"></div>
            </article>

            <!-- carousel controls -->
            <div class="carousel-controls" role="tablist" aria-label="Hero slides controls">
              <button class="carousel-prev" aria-label="Previous slide" data-carousel-prev><i class="fa fa-chevron-left"></i></button>
              <div class="carousel-dots" data-carousel-dots role="tablist">
                <button class="dot active" data-slide-to="1" role="tab" aria-selected="true" aria-label="Slide 1"></button>
                <button class="dot" data-slide-to="2" role="tab" aria-selected="false" aria-label="Slide 2"></button>
                <button class="dot" data-slide-to="3" role="tab" aria-selected="false" aria-label="Slide 3"></button>
              </div>
              <button class="carousel-next" aria-label="Next slide" data-carousel-next><i class="fa fa-chevron-right"></i></button>
            </div>
          </div>
        </div>

        <!-- quick picks / mini-cart (right column on large screens) -->
        <aside class="hero-right" aria-label="Quick picks & cart">
          <div class="card featured-card" role="region" aria-label="Fast Picks">
            <h3 class="featured-title">Fast picks</h3>

            <ul class="quick-picks" role="list">
              <li class="pick" data-id="shawarma" data-price="45" role="listitem">
                <div class="pick-media" role="img" data-thumb="thumb_shawarma.jpg"></div>
                <div class="pick-info">
                  <strong>Shawarma</strong>
                  <span class="muted">GHC 45–80</span>
                </div>
                <div class="pick-actions">
                  <button class="btn small" data-action="open-builder" data-item="shawarma">Customize</button>
                  <button class="icon-btn small" data-action="add-to-cart" data-item="shawarma" aria-label="Add shawarma to cart">
                    <i class="fa fa-cart-plus"></i>
                  </button>
                </div>
              </li>

              <li class="pick" data-id="fries" data-price="55" role="listitem">
                <div class="pick-media" role="img" data-thumb="thumb_fries.jpg"></div>
                <div class="pick-info">
                  <strong>Loaded Fries</strong>
                  <span class="muted">GHC 55</span>
                </div>
                <div class="pick-actions">
                  <button class="btn small" data-action="open-builder" data-item="fries">Customize</button>
                  <button class="icon-btn small" data-action="add-to-cart" data-item="fries"><i class="fa fa-cart-plus"></i></button>
                </div>
              </li>

              <li class="pick" data-id="angwamo" data-price="55" role="listitem">
                <div class="pick-media" role="img" data-thumb="thumb_angwamo.jpg"></div>
                <div class="pick-info">
                  <strong>Angwamo</strong>
                  <span class="muted">GHC 55</span>
                </div>
                <div class="pick-actions">
                  <button class="btn small" data-action="open-builder" data-item="angwamo">Customize</button>
                  <button class="icon-btn small" data-action="add-to-cart" data-item="angwamo"><i class="fa fa-cart-plus"></i></button>
                </div>
              </li>
            </ul>

            <div class="mini-cart">
              <div class="mini-cart-row">
                <span class="muted">Cart</span>
                <strong class="cart-total" id="mini-cart-total">GHC 0</strong>
              </div>
              <div class="mini-cart-actions">
                <button class="btn" data-action="view-cart">View Cart</button>
                <button class="btn btn-outline" data-action="open-builder">Build</button>
              </div>
            </div>
          </div>
        </aside>
      </div>
    </section>

    <!-- ==============================
         PROMO — radiant & visual
         ============================== -->
    <section id="promo" class="promo-radiant" aria-label="Promotions">
      <div class="container promo-inner">
        <div class="promo-left">
          <span class="promo-badge">Limited</span>
          <h2 class="promo-title">Buy 2 Shawarmas • Get 1</h2>
          <div class="promo-actions">
            <button class="btn btn-cta" data-action="open-builder" data-item="shawarma"><i class="fa fa-gift"></i> Claim</button>
            <a class="btn btn-outline" href="#menu">Menu</a>
          </div>
        </div>

        <div class="promo-right">
          <div class="promo-collage">
            <div class="collage-item big" data-img="promo_shawarma.jpg" aria-hidden="true"></div>
            <div class="collage-item medium" data-img="promo_fries.jpg" aria-hidden="true"></div>
            <div class="collage-item small" data-img="promo_angwamo.jpg" aria-hidden="true"></div>
          </div>
        </div>
      </div>
    </section>

    <!-- ==============================
         MENU GRID — visual, low text
         ============================== -->
    <section id="menu" class="menu-section" aria-label="Menu">
      <div class="container">
        <header class="section-head">
          <h2 class="section-title">Menu</h2>
        </header>

        <div class="menu-filters" role="tablist" aria-label="Filter menu">
          <button class="filter active" data-filter="all">All</button>
          <button class="filter" data-filter="shawarma">Shawarma</button>
          <button class="filter" data-filter="fries">Fries</button>
          <button class="filter" data-filter="angwamo">Angwamo</button>
        </div>

        <div class="menu-grid" role="list" aria-live="polite">
          <!-- card: Shawarma -->
          <article class="menu-item" data-id="shawarma-regular" data-category="shawarma" data-price="45" role="listitem">
            <div class="thumb" role="img" data-thumb="thumb_shawarma.jpg"></div>
            <div class="meta">
              <h3 class="name">Shawarma</h3>
              <div class="meta-line">
                <span class="price">GHC 45</span>
                <div class="meta-actions">
                  <button class="btn small" data-action="open-builder" data-item="shawarma">Build</button>
                  <button class="btn outline small" data-action="add-to-cart" data-item="shawarma">Add</button>
                </div>
              </div>
            </div>
          </article>

          <!-- card: Loaded Fries -->
          <article class="menu-item" data-id="fries-single" data-category="fries" data-price="55" role="listitem">
            <div class="thumb" role="img" data-thumb="thumb_fries.jpg"></div>
            <div class="meta">
              <h3 class="name">Loaded Fries</h3>
              <div class="meta-line">
                <span class="price">GHC 55</span>
                <div class="meta-actions">
                  <button class="btn small" data-action="open-builder" data-item="fries">Build</button>
                  <button class="btn outline small" data-action="add-to-cart" data-item="fries">Add</button>
                </div>
              </div>
            </div>
          </article>

          <!-- card: Angwamo -->
          <article class="menu-item" data-id="angwamo-plate" data-category="angwamo" data-price="55" role="listitem">
            <div class="thumb" role="img" data-thumb="thumb_angwamo.jpg"></div>
            <div class="meta">
              <h3 class="name">Angwamo</h3>
              <div class="meta-line">
                <span class="price">GHC 55</span>
                <div class="meta-actions">
                  <button class="btn small" data-action="open-builder" data-item="angwamo">Build</button>
                  <button class="btn outline small" data-action="add-to-cart" data-item="angwamo">Add</button>
                </div>
              </div>
            </div>
          </article>

          <!-- card: Fried Rice -->
          <article class="menu-item" data-id="fried-rice" data-category="rice" data-price="60" role="listitem">
            <div class="thumb" role="img" data-thumb="thumb_rice.jpg"></div>
            <div class="meta">
              <h3 class="name">Fried Rice</h3>
              <div class="meta-line">
                <span class="price">GHC 60</span>
                <div class="meta-actions">
                  <button class="btn small" data-action="open-builder" data-item="rice">Build</button>
                  <button class="btn outline small" data-action="add-to-cart" data-item="rice">Add</button>
                </div>
              </div>
            </div>
          </article>
        </div>
      </div>
    </section>

    <!-- ==============================
         BUILDER MODAL — hidden initially (use hidden attr)
         - stepper panels will be populated by JS
         ============================== -->
    <div id="builder-modal" class="modal modal-builder" role="dialog" aria-modal="true" aria-hidden="true" hidden>
      <div class="modal-shell container" role="document">
        <div class="modal-left">
          <header class="modal-header">
            <h3 id="builder-title">Build</h3>
            <button class="icon-btn" data-action="close-builder" aria-label="Close builder">
              <i class="fa fa-times" aria-hidden="true"></i>
            </button>
          </header>

          <nav class="builder-stepper" aria-label="Builder steps">
            <button class="step active" data-step="size">Size</button>
            <button class="step" data-step="protein">Protein</button>
            <button class="step" data-step="fillings">Fillings</button>
            <button class="step" data-step="sauces">Sauces</button>
            <button class="step" data-step="summary">Summary</button>
          </nav>

          <div class="builder-steps">
            <section class="builder-step-panel" data-step-panel="size" hidden></section>
            <section class="builder-step-panel" data-step-panel="protein" hidden></section>
            <section class="builder-step-panel" data-step-panel="fillings" hidden></section>
            <section class="builder-step-panel" data-step-panel="sauces" hidden></section>
            <section class="builder-step-panel" data-step-panel="summary" hidden></section>
          </div>
        </div>

        <aside class="modal-right">
          <div class="live-preview">
            <div class="preview-image" data-preview-image="preview_shawarma.jpg" role="img" aria-label="Preview image"></div>
            <div class="preview-info">
              <h4 class="preview-title">Your meal</h4>
              <div class="preview-meta">
                <div>
                  <div class="preview-price">GHC 0</div>
                  <div class="muted tiny preview-sub">Est. price</div>
                </div>
                <div class="preview-qty">
                  <button class="icon-btn qty-dec" data-action="qty-dec" aria-label="Decrease quantity">−</button>
                  <span class="qty-value">1</span>
                  <button class="icon-btn qty-inc" data-action="qty-inc" aria-label="Increase quantity">+</button>
                </div>
              </div>

              <div class="preview-actions">
                <button class="btn btn-cta" data-action="add-to-cart"><i class="fa fa-cart-plus"></i> Add</button>
                <button class="btn btn-outline" data-action="order-now"><i class="fa fa-whatsapp"></i> Order</button>
              </div>
            </div>
          </div>
        </aside>
      </div>
    </div>

    <!-- ==============================
         CART DRAWER — hidden initially
         ============================== -->
    <aside id="cart-drawer" class="drawer cart-drawer" role="dialog" aria-modal="true" aria-labelledby="cart-title" aria-hidden="true" hidden>
      <div class="drawer-shell container">
        <header class="drawer-head">
          <h3 id="cart-title">Your Cart</h3>
          <button class="icon-btn drawer-close" data-action="close-cart" aria-label="Close cart">
            <i class="fa fa-times" aria-hidden="true"></i>
          </button>
        </header>

        <div class="cart-body" aria-live="polite">
          <ul class="cart-items" role="list"></ul>

          <div class="cart-summary">
            <div class="cart-row"><span>Subtotal</span><strong id="cart-subtotal">GHC 0</strong></div>
            <div class="cart-row"><span>Delivery</span><strong id="cart-delivery">GHC 0</strong></div>
            <div class="cart-row total"><span>Total</span><strong id="cart-total">GHC 0</strong></div>

            <div class="cart-actions">
              <a class="btn btn-cta checkout" id="checkout-wa" href="#" aria-label="Checkout on WhatsApp"><i class="fa fa-whatsapp"></i> Checkout</a>
              <button class="btn btn-outline clear-cart" data-action="clear-cart">Clear</button>
            </div>
          </div>
        </div>
      </div>
    </aside>

    <!-- ==============================
         CHATBOT MANEF — hidden initially
         ============================== -->
    <div id="manef-chat" class="chat-widget" aria-hidden="true">
      <button class="chat-toggle" data-action="toggle-chat" aria-expanded="false" aria-controls="chat-panel" aria-label="Open chat with Manef">
        <i class="fa fa-comment"></i>
      </button>

      <div id="chat-panel" class="chat-panel" role="dialog" aria-label="Manef chat assistant" hidden>
        <header class="chat-head">
          <div class="chat-avatar" role="img" data-img="manef_avatar.png" aria-label="Manef avatar"></div>
          <div>
            <strong>Manef</strong>
            <div class="muted tiny">Type "build shawarma"</div>
          </div>
          <button class="icon-btn" data-action="close-chat" aria-label="Close chat"><i class="fa fa-times"></i></button>
        </header>

        <div class="chat-body" aria-live="polite">
          <div class="bot-message">Hi — I'm Manef, your virtual chef.</div>
          <div class="chat-messages" role="log"></div>
        </div>

        <footer class="chat-foot">
          <input class="chat-input" type="text" aria-label="Message Manef" placeholder="Ask me...">
          <button class="icon-btn send-chat" data-action="send-chat" aria-label="Send message"><i class="fa fa-paper-plane"></i></button>
        </footer>
      </div>
    </div>

    <!-- ==============================
         TESTIMONIALS / SOCIAL PROOF (minimal)
         ============================== -->
    <section id="testimonials" class="testimonials-section" aria-label="Testimonials">
      <div class="container">
        <h2 class="section-title">Loved by locals</h2>
        <div class="testimonials-grid" role="list">
          <blockquote class="testimonial" role="listitem"><p>“Fresh & fast.”</p><footer class="muted">— Nana</footer></blockquote>
          <blockquote class="testimonial" role="listitem"><p>“Perfect cheese pull.”</p><footer class="muted">— Kofi</footer></blockquote>
        </div>
      </div>
    </section>

    <!-- ==============================
         ABOUT (short, visual)
         ============================== -->
    <section id="about" class="about-section" aria-label="About">
      <div class="container about-grid">
        <div class="about-media" data-img="about_kitchen.jpg" role="img" aria-label="Kitchen"></div>
        <div class="about-content">
          <h2>Why us?</h2>
          <p class="muted">Fresh meat. House sauces. Quick service.</p>
          <ul class="features-list">
            <li><i class="fa fa-check"></i> Fresh daily</li>
            <li><i class="fa fa-clock"></i> Ready fast</li>
          </ul>
        </div>
      </div>
    </section>

    <!-- ==============================
         CONTACT
         ============================== -->
    <section id="contact" class="contact-section" aria-label="Contact">
      <div class="container contact-inner">
        <div class="contact-card">
          <h3>Visit / Order</h3>
          <p class="muted"><strong>Address:</strong> Tema Community 25</p>
          <div class="contact-cta">
            <a class="btn btn-cta" href="https://wa.me/233552509241" target="_blank" rel="noopener"><i class="fa fa-whatsapp"></i> WhatsApp</a>
            <a class="btn btn-outline" href="tel:+233552509241"><i class="fa fa-phone"></i> Call</a>
          </div>
        </div>

        <div class="map-card" aria-hidden="true">
          <div class="map-placeholder" data-map="embed" role="img" aria-label="Map placeholder"></div>
        </div>
      </div>
    </section>

    <!-- ==============================
         FOOTER
         ============================== -->
    <footer class="site-footer" role="contentinfo">
      <div class="container footer-inner">
        <div class="footer-col">
          <a class="brand" href="/" aria-label="Wrap District home">
            <img src="logo.svg" alt="Wrap District logo" width="44" height="44">
            <div>
              <strong>WRAP DISTRICT</strong>
              <div class="muted small">Tema Community 25</div>
            </div>
          </a>
        </div>

        <div class="footer-col">
          <h4>Quick links</h4>
          <ul class="footer-links" role="list">
            <li><a href="#menu">Menu</a></li>
            <li><a href="#promo">Promos</a></li>
            <li><a href="#contact">Contact</a></li>
          </ul>
        </div>

        <div class="footer-col">
          <h4>Follow</h4>
          <div class="socials">
            <a class="icon-btn" href="#"><i class="fa fa-instagram"></i></a>
            <a class="icon-btn" href="#"><i class="fa fa-facebook"></i></a>
          </div>
        </div>
      </div>

      <div class="container copyright">
        <small class="muted">© <span id="year">2025</span> Wrap District</small>
      </div>
    </footer>
  </main>

  <!-- End body -->
</body>
<script>
/**
 * Wrap District — Interaction Script
 * Complements the HTML <body> you provided.
 * - Ensures all buttons work (open/close modals, drawer, chat, builder, cart).
 * - Hero carousel with autoplay, controls, parallax pointer move.
 * - Image mapper: uses data-img / data-thumb values as repo-root filenames.
 * - Builder modal (full-featured): sizes/proteins/fillings/sauces, live preview, add-to-cart.
 * - Cart persisted in localStorage, checkout via WhatsApp.
 * - Mobile nav (hamburger), keyboard accessibility (Esc), small UX polish.
 *
 * Drop this script at the end of the <body>.
 */
(function () {
  'use strict';

  // ---------- Configuration ----------
  const WA_PHONE = '233552509241';
  const WA_URL = (msg) => `https://wa.me/${WA_PHONE}?text=${encodeURIComponent(msg)}`;
  const CART_KEY = 'wrapdistrict_cart_v1';
  const FAV_KEY = 'wrapdistrict_favs_v1';
  const AUTO_PLAY_MS = 4500;

  // ---------- Tiny DOM helpers ----------
  const $ = (sel, ctx = document) => (ctx || document).querySelector(sel);
  const $$ = (sel, ctx = document) => Array.from((ctx || document).querySelectorAll(sel));
  const on = (el, ev, fn, opts) => el && el.addEventListener(ev, fn, opts);
  const create = (tag, attrs = {}) => {
    const e = document.createElement(tag);
    Object.entries(attrs).forEach(([k, v]) => e.setAttribute(k, v));
    return e;
  };
  const clamp = (v, a, b) => Math.max(a, Math.min(b, v));
  const fmt = (n) => `GHC ${Number(n).toFixed(2)}`;

  // ---------- State ----------
  let cart = load(CART_KEY) || [];
  let favs = load(FAV_KEY) || {};

  // ---------- Image mapper (uses filenames already present in data-img/data-thumb) ----------
  function applyRepoImages() {
    // data-img: if element is <img> set src, otherwise set background-image
    $$('[data-img]').forEach(el => {
      const val = el.dataset.img && String(el.dataset.img).trim();
      if (!val) return;
      const url = encodeURI(val);
      if (el.tagName.toLowerCase() === 'img') {
        el.src = url;
        el.loading = el.loading || 'lazy';
        el.decoding = 'async';
      } else {
        el.style.backgroundImage = `linear-gradient(120deg, rgba(0,0,0,0.12), rgba(0,0,0,0.04)), url('${url}')`;
        el.style.backgroundSize = 'cover';
        el.style.backgroundPosition = 'center';
        el.style.backgroundRepeat = 'no-repeat';
      }
      // if role=img and no aria-label, set one
      if (!el.getAttribute('aria-label') && el.getAttribute('role') === 'img') {
        el.setAttribute('aria-label', (val || '').replace(/[-_.]/g, ' '));
      }
    });

    // data-thumb
    $$('[data-thumb]').forEach(el => {
      const val = el.dataset.thumb && String(el.dataset.thumb).trim();
      if (!val) return;
      const url = encodeURI(val);
      if (el.tagName.toLowerCase() === 'img') {
        el.src = url;
        el.loading = el.loading || 'lazy';
        el.decoding = 'async';
      } else {
        el.style.backgroundImage = `url('${url}')`;
        el.style.backgroundSize = 'cover';
        el.style.backgroundPosition = 'center';
      }
    });

    // preview-image attribute (some elements use data-preview-image)
    $$('[data-preview-image]').forEach(el => {
      const val = el.dataset.previewImage || el.dataset.previewImage;
      const key = el.dataset.previewImage || el.getAttribute('data-preview-image');
      const fname = key || el.dataset.previewImage;
      if (!fname) return;
      el.style.backgroundImage = `url('${encodeURI(fname)}')`;
      el.style.backgroundSize = 'cover';
      el.style.backgroundPosition = 'center';
    });
  }

  // ---------- Local storage helpers ----------
  function load(key) {
    try { return JSON.parse(localStorage.getItem(key)); } catch (e) { return null; }
  }
  function save(key, val) {
    try { localStorage.setItem(key, JSON.stringify(val)); } catch (e) { /* ignore */ }
  }

  // ---------- Toast ----------
  let toastTimer = null;
  function toast(msg, t = 1800) {
    let el = document.querySelector('.wrap-toaster');
    if (!el) {
      el = document.createElement('div');
      el.className = 'wrap-toaster';
      document.body.appendChild(el);
    }
    el.textContent = msg;
    el.classList.add('visible');
    if (toastTimer) clearTimeout(toastTimer);
    toastTimer = setTimeout(() => el.classList.remove('visible'), t);
  }

  // ---------- Cart helpers & UI ----------
  function cartCount() {
    return cart.reduce((s, it) => s + (it.qty || 0), 0);
  }
  function cartSubtotal() {
    return cart.reduce((s, it) => s + (Number(it.unitPrice || 0) * (it.qty || 1)), 0);
  }
  function deliveryFee() {
    return cart.length ? 10 : 0;
  }
  function cartTotal() {
    return cartSubtotal() + deliveryFee();
  }

  function updateCartBadge() {
    const badge = $('#cart-count');
    if (!badge) return;
    const count = cartCount();
    badge.textContent = String(count);
    badge.dataset.count = String(count);
    // small pulse
    badge.classList.add('pulse');
    setTimeout(() => badge.classList.remove('pulse'), 800);
  }

  function renderMiniCartTotal() {
    const el = $('#mini-cart-total');
    if (el) el.textContent = fmt(cartSubtotal());
  }

  function renderCartDrawer() {
    const drawer = $('#cart-drawer');
    if (!drawer) return;
    const list = drawer.querySelector('.cart-items');
    list.innerHTML = '';
    cart.forEach((it, idx) => {
      const li = document.createElement('li');
      li.className = 'cart-item';
      li.dataset.index = idx;
      li.innerHTML = `
        <div class="cart-item-row">
          <div>
            <strong class="cart-item-title">${escapeHtml(it.name)}</strong>
            <div class="muted small">${escapeHtml(it.optionsSummary || '')}</div>
          </div>
          <div style="text-align:right">
            <div class="muted small">Unit: ${fmt(it.unitPrice)}</div>
            <div style="margin:6px 0">Qty: <strong>${it.qty}</strong></div>
            <div class="cart-item-subtotal">${fmt(it.unitPrice * it.qty)}</div>
            <div style="margin-top:8px"><button class="icon-btn remove-item" data-index="${idx}" aria-label="Remove">Remove</button></div>
          </div>
        </div>
      `;
      list.appendChild(li);
    });

    $('#cart-subtotal').textContent = fmt(cartSubtotal());
    $('#cart-delivery').textContent = fmt(deliveryFee());
    $('#cart-total').textContent = fmt(cartTotal());
  }

  function addToCart(item) {
    // merge by name + optionsSummary
    const key = `${item.name}::${item.optionsSummary || ''}`;
    const found = cart.find(c => `${c.name}::${c.optionsSummary || ''}` === key);
    if (found) found.qty += item.qty;
    else cart.push(item);
    save(CART_KEY, cart);
    updateCartBadge();
    renderMiniCartTotal();
    renderCartDrawer();
    toast('Added to cart');
  }

  function removeCartIndex(i) {
    if (i == null || i < 0 || i >= cart.length) return;
    cart.splice(i, 1);
    save(CART_KEY, cart);
    updateCartBadge();
    renderMiniCartTotal();
    renderCartDrawer();
  }

  function clearCart() {
    cart = [];
    save(CART_KEY, cart);
    updateCartBadge();
    renderMiniCartTotal();
    renderCartDrawer();
  }

  // ---------- Escape HTML helper ----------
  function escapeHtml(s) {
    if (!s && s !== 0) return '';
    return String(s).replace(/[&<>"']/g, m => ({ '&': '&amp;', '<': '&lt;', '>': '&gt;', '"': '&quot;', "'": '&#39;' }[m]));
  }

  // ---------- Hero Carousel ----------
  function initCarousel() {
    const carousel = document.querySelector('[data-carousel]');
    if (!carousel) return;
    const slides = Array.from(carousel.querySelectorAll('.hero-slide'));
    const dots = Array.from(carousel.querySelectorAll('.carousel-dots .dot'));
    const prev = carousel.querySelector('[data-carousel-prev]');
    const next = carousel.querySelector('[data-carousel-next]');
    let idx = slides.findIndex(s => s.classList.contains('active'));
    if (idx < 0) idx = 0;
    let timer = null;

    function show(i) {
      i = (i + slides.length) % slides.length;
      slides.forEach((s, j) => {
        const hidden = j !== i;
        s.setAttribute('aria-hidden', hidden ? 'true' : 'false');
        s.classList.toggle('active', !hidden);
      });
      dots.forEach((d, j) => {
        d.classList.toggle('active', j === i);
        d.setAttribute('aria-selected', j === i ? 'true' : 'false');
      });
      idx = i;
    }

    function nextSlide() { show(idx + 1); resetTimer(); }
    function prevSlide() { show(idx - 1); resetTimer(); }

    on(prev, 'click', prevSlide);
    on(next, 'click', nextSlide);
    dots.forEach((d, j) => on(d, 'click', () => { show(j); resetTimer(); }));

    // autoplay
    function resetTimer() {
      if (timer) clearInterval(timer);
      timer = setInterval(() => show(idx + 1), AUTO_PLAY_MS);
    }
    carousel.addEventListener('mouseenter', () => timer && clearInterval(timer));
    carousel.addEventListener('mouseleave', resetTimer);
    resetTimer();

    // pointer parallax for slide-media
    slides.forEach(s => {
      const media = s.querySelector('.slide-media');
      if (!media) return;
      s.addEventListener('pointermove', (ev) => {
        const r = s.getBoundingClientRect();
        const px = ((ev.clientX - r.left) / r.width) - 0.5;
        const py = ((ev.clientY - r.top) / r.height) - 0.5;
        media.style.transform = `translate3d(${px * 10}px, ${py * 8}px, 0) scale(1.02)`;
      }, { passive: true });
      s.addEventListener('pointerleave', () => media.style.transform = '');
    });

    // keyboard navigation
    document.addEventListener('keydown', (e) => {
      if (e.key === 'ArrowLeft') prevSlide();
      if (e.key === 'ArrowRight') nextSlide();
    });
  }

  // ---------- Promo collage microanimation ----------
  function initPromo() {
    const promo = $('#promo');
    if (!promo) return;
    setInterval(() => promo.classList.toggle('promo-glow'), 2500);
  }

  // ---------- Search (simple prompt search) ----------
  function initSearch() {
    const btn = $('.search-btn');
    if (!btn) return;
    btn.addEventListener('click', () => {
      const q = prompt('Search menu (type a name):');
      if (!q) return;
      const items = $$('[data-id], .menu-item, .pick');
      const found = items.find(i => (i.dataset.id || i.textContent || '').toLowerCase().includes(q.toLowerCase()));
      if (found) {
        found.scrollIntoView({ behavior: 'smooth', block: 'center' });
        found.classList.add('pulse-highlight');
        setTimeout(() => found.classList.remove('pulse-highlight'), 1400);
      } else {
        alert('No results');
      }
    });
  }

  // ---------- Filters ----------
  function initFilters() {
    const filters = $$('.filter');
    filters.forEach(f => f.addEventListener('click', () => {
      const key = f.dataset.filter;
      filters.forEach(x => x.classList.toggle('active', x === f));
      const items = $$('.menu-item');
      items.forEach(it => {
        const cat = it.dataset.category || 'all';
        it.style.display = (key === 'all' || cat === key) ? '' : 'none';
      });
    }));
  }

  // ---------- Favorites (simple) ----------
  function initFavorites() {
    document.body.addEventListener('click', (e) => {
      const btn = e.target.closest('[data-action="fav"]');
      if (!btn) return;
      const holder = btn.closest('.menu-item, .pick');
      const id = holder?.dataset.id || holder?.dataset.id;
      if (!id) return toast('Cannot favourite');
      favs[id] = !favs[id];
      save(FAV_KEY, favs);
      btn.classList.toggle('favored', !!favs[id]);
      toast(favs[id] ? 'Added to favourites' : 'Removed from favourites');
    });
  }

  // ---------- Builder modal & logic ----------
  const CATALOG = {
    shawarma: {
      name: 'Shawarma',
      sizes: [{ id: 'regular', label: 'Regular', price: 45 }, { id: 'jumbo', label: 'Jumbo', price: 65 }],
      proteins: [{ id: 'chicken', label: 'Chicken', price: 0 }, { id: 'beef', label: 'Beef', price: 10 }],
      fillings: [{ id: 'lettuce', label: 'Lettuce', price: 0 }, { id: 'cheese', label: 'Cheese', price: 5 }, { id: 'onion', label: 'Onion', price: 0 }],
      sauces: [{ id: 'garlic', label: 'Garlic' }, { id: 'spicy', label: 'Spicy' }]
    },
    fries: {
      name: 'Loaded Fries',
      sizes: [{ id: 'single', label: 'Single', price: 55 }, { id: 'large', label: 'Large', price: 70 }],
      proteins: [{ id: 'none', label: 'No protein', price: 0 }, { id: 'chicken', label: 'Chicken', price: 10 }, { id: 'bacon', label: 'Bacon', price: 12 }],
      fillings: [{ id: 'cheese', label: 'Cheese', price: 4 }, { id: 'jalapeno', label: 'Jalapeno', price: 3 }],
      sauces: [{ id: 'cheese', label: 'Cheese Sauce' }, { id: 'mayo', label: 'Garlic Mayo' }]
    },
    angwamo: {
      name: 'Angwamo',
      sizes: [{ id: 'plate', label: 'Plate', price: 55 }, { id: 'combo', label: 'Combo', price: 70 }],
      proteins: [{ id: 'chicken', label: 'Chicken', price: 0 }, { id: 'beef', label: 'Beef', price: 10 }],
      fillings: [{ id: 'egg', label: 'Egg', price: 0 }, { id: 'coleslaw', label: 'Coleslaw', price: 5 }],
      sauces: [{ id: 'spicy', label: 'Spicy' }, { id: 'mild', label: 'Mild' }]
    },
    rice: {
      name: 'Fried Rice',
      sizes: [{ id: 'regular', label: 'Regular', price: 60 }, { id: 'extra', label: 'Extra', price: 80 }],
      proteins: [{ id: 'chicken', label: 'Chicken', price: 0 }, { id: 'beef', label: 'Beef', price: 12 }],
      fillings: [{ id: 'veg', label: 'Veg', price: 0 }],
      sauces: []
    }
  };

  let builderState = null; // when modal open, holds config

  function openBuilder(itemKey) {
    const modal = $('#builder-modal');
    const cfg = CATALOG[itemKey];
    if (!modal || !cfg) return toast('Cannot open builder for ' + itemKey);
    builderState = {
      itemKey,
      size: cfg.sizes[0].id,
      protein: cfg.proteins[0].id,
      fillings: new Set(),
      sauces: new Set(),
      qty: 1,
      delivery: 'pickup'
    };
    populateBuilder(cfg);
    modal.hidden = false;
    modal.setAttribute('aria-hidden', 'false');
    document.documentElement.classList.add('no-scroll');
    gotoBuilderStep('size');
    updateBuilderPreview();
    // focus
    setTimeout(() => $('#builder-modal .modal-header button')?.focus(), 80);
  }

  function closeBuilder() {
    const modal = $('#builder-modal');
    if (!modal) return;
    modal.hidden = true;
    modal.setAttribute('aria-hidden', 'true');
    document.documentElement.classList.remove('no-scroll');
    builderState = null;
  }

  function populateBuilder(cfg) {
    // set title
    const title = $('#builder-title');
    if (title) title.textContent = `Build ${cfg.name}`;

    // fill panels
    const panels = $$('[data-step-panel]');
    panels.forEach(p => p.hidden = true);

    // sizes
    const sizePanel = $('[data-step-panel="size"]');
    if (sizePanel) {
      sizePanel.innerHTML = '';
      cfg.sizes.forEach(s => {
        const btn = document.createElement('button');
        btn.type = 'button';
        btn.className = 'option';
        btn.dataset.optType = 'size';
        btn.dataset.optId = s.id;
        btn.dataset.optPrice = s.price;
        btn.innerHTML = `<strong>${s.label}</strong><div class="muted small">${fmt(s.price)}</div>`;
        if (s.id === builderState.size) btn.classList.add('selected');
        btn.addEventListener('click', () => {
          builderState.size = s.id;
          sizePanel.querySelectorAll('.option').forEach(x => x.classList.remove('selected'));
          btn.classList.add('selected');
          updateBuilderPreview();
        });
        sizePanel.appendChild(btn);
      });
    }

    // proteins
    const proteinPanel = $('[data-step-panel="protein"]');
    if (proteinPanel) {
      proteinPanel.innerHTML = '';
      cfg.proteins.forEach(p => {
        const btn = document.createElement('button');
        btn.type = 'button';
        btn.className = 'option';
        btn.dataset.optType = 'protein';
        btn.dataset.optId = p.id;
        btn.dataset.optPrice = p.price || 0;
        btn.innerHTML = `<strong>${p.label}</strong><div class="muted small">${p.price ? '+ ' + fmt(p.price) : 'Included'}</div>`;
        if (p.id === builderState.protein) btn.classList.add('selected');
        btn.addEventListener('click', () => {
          builderState.protein = p.id;
          proteinPanel.querySelectorAll('.option').forEach(x => x.classList.remove('selected'));
          btn.classList.add('selected');
          updateBuilderPreview();
        });
        proteinPanel.appendChild(btn);
      });
    }

    // fillings (multi)
    const fillingsPanel = $('[data-step-panel="fillings"]');
    if (fillingsPanel) {
      fillingsPanel.innerHTML = '';
      (cfg.fillings || []).forEach(f => {
        const btn = document.createElement('button');
        btn.type = 'button';
        btn.className = 'option';
        btn.dataset.optType = 'fillings';
        btn.dataset.optId = f.id;
        btn.dataset.optPrice = f.price || 0;
        btn.innerHTML = `<span>${f.label}</span><div class="muted small">${f.price ? '+ ' + fmt(f.price) : ''}</div>`;
        if (builderState.fillings.has(f.id)) btn.classList.add('selected');
        btn.addEventListener('click', () => {
          if (builderState.fillings.has(f.id)) { builderState.fillings.delete(f.id); btn.classList.remove('selected'); }
          else { builderState.fillings.add(f.id); btn.classList.add('selected'); }
          updateBuilderPreview();
        });
        fillingsPanel.appendChild(btn);
      });
    }

    // sauces
    const saucesPanel = $('[data-step-panel="sauces"]');
    if (saucesPanel) {
      saucesPanel.innerHTML = '';
      (cfg.sauces || []).forEach(s => {
        const btn = document.createElement('button');
        btn.type = 'button';
        btn.className = 'option';
        btn.dataset.optType = 'sauces';
        btn.dataset.optId = s.id;
        btn.innerHTML = `<span>${s.label}</span>`;
        if (builderState.sauces.has(s.id)) btn.classList.add('selected');
        btn.addEventListener('click', () => {
          if (builderState.sauces.has(s.id)) { builderState.sauces.delete(s.id); btn.classList.remove('selected'); }
          else { builderState.sauces.add(s.id); btn.classList.add('selected'); }
          updateBuilderPreview();
        });
        saucesPanel.appendChild(btn);
      });
    }

    // qty buttons
    const qtyVal = $('.qty-value');
    if (qtyVal) qtyVal.textContent = String(builderState.qty);
  }

  function gotoBuilderStep(step) {
    $$('.builder-stepper .step').forEach(s => s.classList.toggle('active', s.dataset.step === step));
    $$('[data-step-panel]').forEach(p => p.hidden = (p.dataset.stepPanel !== step));
  }
  // wire stepper clicks
  $$('.builder-stepper .step').forEach(s => s.addEventListener('click', () => gotoBuilderStep(s.dataset.step)));

  function updateBuilderPreview() {
    if (!builderState) return;
    const cfg = CATALOG[builderState.itemKey];
    if (!cfg) return;
    const sizeObj = cfg.sizes.find(x => x.id === builderState.size) || cfg.sizes[0];
    const proteinObj = cfg.proteins.find(x => x.id === builderState.protein) || cfg.proteins[0];
    let unit = (sizeObj?.price || 0) + (proteinObj?.price || 0);
    (cfg.fillings || []).forEach(f => { if (builderState.fillings.has(f.id)) unit += (f.price || 0); });
    const total = (unit + (builderState.delivery === 'delivery' ? 10 : 0)) * builderState.qty;
    const previewPriceEl = $('.preview-price');
    if (previewPriceEl) previewPriceEl.textContent = fmt(total);
    const qtyEl = $('.qty-value');
    if (qtyEl) qtyEl.textContent = String(builderState.qty);

    // preview-image
    const previewImage = $('.preview-image');
    if (previewImage) {
      // try to set preview from data-preview-image or fallback to item preview
      // If preview-image already has inline background set by data attribute, keep it.
      const existing = previewImage.style.backgroundImage;
      if (!existing || existing === 'none') {
        const fallback = (cfg.name || builderState.itemKey).toLowerCase().replace(/\s+/g, '_') + '_preview.jpg';
        previewImage.style.backgroundImage = `url('${escapeURI(fallback)}')`;
      }
    }
  }

  // add-to-cart from builder
  document.addEventListener('click', (e) => {
    const btn = e.target.closest('[data-action="add-to-cart"]');
    if (!btn) return;
    if (!builderState) {
      toast('Open the builder first');
      return;
    }
    const cfg = CATALOG[builderState.itemKey];
    if (!cfg) return;
    const sizeObj = cfg.sizes.find(s => s.id === builderState.size) || cfg.sizes[0];
    const proteinObj = cfg.proteins.find(p => p.id === builderState.protein) || cfg.proteins[0];
    const fillingsArr = cfg.fillings.filter(f => builderState.fillings.has(f.id)).map(f => f.label);
    const saucesArr = cfg.sauces.filter(s => builderState.sauces.has(s.id)).map(s => s.label);
    let unit = (sizeObj?.price || 0) + (proteinObj?.price || 0);
    (cfg.fillings || []).forEach(f => { if (builderState.fillings.has(f.id)) unit += (f.price || 0); });

    const optionsSummary = [
      `Size: ${sizeObj.label}`,
      `Protein: ${proteinObj.label}`,
      fillingsArr.length ? `Fillings: ${fillingsArr.join(', ')}` : null,
      saucesArr.length ? `Sauces: ${saucesArr.join(', ')}` : null,
      builderState.delivery === 'delivery' ? 'Delivery' : 'Pickup'
    ].filter(Boolean).join(' • ');

    const item = {
      id: `${builderState.itemKey}-${Date.now()}`,
      name: cfg.name,
      qty: builderState.qty,
      unitPrice: Number(unit),
      optionsSummary
    };
    addToCart(item);
    closeBuilder();
  });

  // order-now from builder -> WhatsApp
  document.addEventListener('click', (e) => {
    const btn = e.target.closest('[data-action="order-now"]');
    if (!btn) return;
    if (!builderState) { toast('Open builder'); return; }
    const cfg = CATALOG[builderState.itemKey];
    const sizeObj = cfg.sizes.find(s => s.id === builderState.size) || cfg.sizes[0];
    const proteinObj = cfg.proteins.find(p => p.id === builderState.protein) || cfg.proteins[0];
    const fillingsArr = cfg.fillings.filter(f => builderState.fillings.has(f.id)).map(f => f.label).join(', ') || 'None';
    const saucesArr = cfg.sauces.filter(s => builderState.sauces.has(s.id)).map(s => s.label).join(', ') || 'None';
    let unit = (sizeObj?.price || 0) + (proteinObj?.price || 0);
    (cfg.fillings || []).forEach(f => { if (builderState.fillings.has(f.id)) unit += (f.price || 0); });
    const total = ((unit) + (builderState.delivery === 'delivery' ? 10 : 0)) * builderState.qty;
    const msg = `Hello Wrap District, I want ${builderState.qty} x ${cfg.name} (${sizeObj.label}/${proteinObj.label}). Fillings: ${fillingsArr}. Sauces: ${saucesArr}. Delivery: ${builderState.delivery}. Total: ${fmt(total)}.`;
    window.open(WA_URL(msg), '_blank');
  });

  // qty inc/dec in builder
  document.addEventListener('click', (e) => {
    if (e.target.closest('[data-action="qty-inc"]')) {
      if (!builderState) { toast('Open builder'); return; }
      builderState.qty = clamp((builderState.qty || 1) + 1, 1, 99);
      updateBuilderPreview();
    } else if (e.target.closest('[data-action="qty-dec"]')) {
      if (!builderState) { toast('Open builder'); return; }
      builderState.qty = clamp((builderState.qty || 1) - 1, 1, 99);
      updateBuilderPreview();
    }
  });

  // ---------- Quick actions & add-to-cart (delegated) ----------
  document.body.addEventListener('click', (e) => {
    const add = e.target.closest('[data-action="add-to-cart"]');
    if (add && !add.closest('#builder-modal')) {
      // quick add from menu/picks
      e.preventDefault();
      const itemKey = add.dataset.item || add.closest('.pick')?.dataset.id || add.closest('.menu-item')?.dataset.category;
      const price = Number(add.closest('.pick')?.dataset.price || add.closest('.menu-item')?.dataset.price || add.dataset.price || 0);
      if (!itemKey) return toast('Item not recognized');
      addToCart({
        id: `${itemKey}-${Date.now()}`,
        name: capitalize(itemKey),
        qty: 1,
        unitPrice: price || 0,
        optionsSummary: 'Default'
      });
      return;
    }

    const openBuilderBtn = e.target.closest('[data-action="open-builder"]');
    if (openBuilderBtn) {
      e.preventDefault();
      const key = openBuilderBtn.dataset.item;
      openBuilder(key);
      return;
    }

    const quick = e.target.closest('[data-action="quick-order"]');
    if (quick) {
      e.preventDefault();
      const key = quick.dataset.item;
      quickOrder(key);
      return;
    }

    const viewCartBtn = e.target.closest('[data-action="view-cart"]');
    if (viewCartBtn) {
      e.preventDefault();
      openCart();
      return;
    }
  });

  // remove cart item
  document.body.addEventListener('click', (e) => {
    const rem = e.target.closest('.remove-item');
    if (!rem) return;
    const idx = Number(rem.dataset.index);
    if (!Number.isNaN(idx)) removeCartIndex(idx);
  });

  // clear cart
  document.body.addEventListener('click', (e) => {
    if (e.target.closest('.clear-cart') || e.target.closest('[data-action="clear-cart"]')) {
      if (confirm('Clear cart?')) clearCart();
    }
  });

  // checkout on WA
  on($('#checkout-wa'), 'click', (ev) => {
    ev.preventDefault();
    if (!cart.length) return alert('Cart is empty');
    const lines = cart.map(it => `${it.qty} x ${it.name} (${it.optionsSummary || 'Default'}) — ${fmt(it.unitPrice)}`);
    const msg = `Hello Wrap District, I'd like to order:\n${lines.join('\n')}\n\nSubtotal: ${fmt(cartSubtotal())}\nDelivery: ${fmt(deliveryFee())}\nTotal: ${fmt(cartTotal())}\n\nDeliver to: [address]`;
    window.open(WA_URL(msg), '_blank');
  });

  // quickOrder function
  function quickOrder(key) {
    const cfgName = capitalize(key || 'item');
    const defaultPrice = 0;
    const msg = `Hello Wrap District, I'd like 1 x ${cfgName}. Please deliver to [address].`;
    window.open(WA_URL(msg), '_blank');
  }

  // ---------- Cart drawer open/close ----------
  function openCart() {
    const drawer = $('#cart-drawer');
    if (!drawer) return;
    drawer.hidden = false;
    drawer.setAttribute('aria-hidden', 'false');
    document.documentElement.classList.add('no-scroll');
    renderCartDrawer();
  }
  function closeCart() {
    const drawer = $('#cart-drawer');
    if (!drawer) return;
    drawer.hidden = true;
    drawer.setAttribute('aria-hidden', 'true');
    document.documentElement.classList.remove('no-scroll');
  }
  // hook close buttons
  $$('.drawer-close, [data-action="close-cart"]').forEach(b => on(b, 'click', (e) => { e.preventDefault(); closeCart(); }));

  // header cart button opens drawer
  $$('.cart-btn, [data-action="open-cart"]').forEach(b => on(b, 'click', (e) => { e.preventDefault(); openCart(); }));

  // ---------- Builder modal close button
  document.addEventListener('click', (e) => {
    if (e.target.closest('[data-action="close-builder"]')) {
      closeBuilder();
    }
  });

  // ---------- Chatbot (Manef) ----------
  function initChat() {
    const toggle = document.querySelector('[data-action="toggle-chat"], .chat-toggle');
    const panel = $('#chat-panel');
    const chatMessages = panel?.querySelector('.chat-messages');
    const chatInput = panel?.querySelector('.chat-input');
    if (!toggle || !panel || !chatMessages || !chatInput) return;

    toggle.addEventListener('click', (e) => {
      const open = panel.hidden;
      panel.hidden = !open;
      toggle.setAttribute('aria-expanded', String(open));
      // show panel and focus input
      if (open) setTimeout(() => chatInput.focus(), 120);
    });

    // close
    document.querySelectorAll('[data-action="close-chat"]').forEach(b => b.addEventListener('click', () => {
      panel.hidden = true;
      toggle.setAttribute('aria-expanded', 'false');
    }));

    function append(who, text) {
      const el = document.createElement('div');
      el.className = `chat-msg ${who}`;
      el.textContent = text;
      chatMessages.appendChild(el);
      chatMessages.scrollTop = chatMessages.scrollHeight;
    }

    append('bot', "Hi — I'm Manef. Ask me about menu or type 'build shawarma'.");

    function handleBot(text) {
      const t = (text || '').toLowerCase();
      if (t.includes('shawarma')) return append('bot', 'Shawarma starts from GHC 45. Want to build? Type "build shawarma".');
      if (t.includes('fries')) return append('bot', 'Loaded fries start at GHC 55. Want to customize? Type "build fries".');
      if (t.includes('build') && t.includes('shawarma')) { append('bot', 'Opening builder...'); openBuilder('shawarma'); return; }
      if (t.includes('promo')) return append('bot', 'Promo: Buy 2 shawarmas, get 1 free (limited).');
      if (t.includes('order')) return append('bot', 'Use the checkout button or tell me what you want and I will create a WhatsApp order for you.');
      append('bot', "I can help with menu, promos, order. Try: 'How much is shawarma?' or 'Build shawarma'.");
    }

    on(panel.querySelector('.send-chat'), 'click', () => {
      const v = chatInput.value.trim();
      if (!v) return;
      append('user', v);
      chatInput.value = '';
      setTimeout(() => handleBot(v), 300 + Math.random() * 500);
    });

    chatInput.addEventListener('keydown', (e) => {
      if (e.key === 'Enter') {
        e.preventDefault();
        const v = chatInput.value.trim();
        if (!v) return;
        append('user', v);
        chatInput.value = '';
        setTimeout(() => handleBot(v), 300 + Math.random() * 500);
      }
    });
  }

  // ---------- Mobile nav (hamburger) ----------
  function initMobileNav() {
    const burger = $('.hamburger');
    const mainNav = $('.main-nav');
    if (!burger || !mainNav) return;
    burger.addEventListener('click', (e) => {
      const open = document.documentElement.classList.toggle('mobile-nav-open');
      burger.setAttribute('aria-expanded', String(open));
    });

    // close nav on clicking a nav link (mobile)
    $$('.main-nav .nav-link').forEach(a => a.addEventListener('click', () => {
      if (document.documentElement.classList.contains('mobile-nav-open')) {
        document.documentElement.classList.remove('mobile-nav-open');
        $('.hamburger')?.setAttribute('aria-expanded', 'false');
      }
    }));
  }

  // ---------- Small helpers ----------
  function capitalize(s) {
    if (!s) return '';
    return s.charAt(0).toUpperCase() + s.slice(1);
  }
  function escapeURI(s) {
    try { return encodeURI(s); } catch (e) { return s; }
  }

  // ---------- Keyboard handlers ----------
  document.addEventListener('keydown', (e) => {
    if (e.key === 'Escape') {
      // close builder, cart, chat, mobile nav
      closeBuilder();
      closeCart();
      const cp = $('#chat-panel'); if (cp && !cp.hidden) { cp.hidden = true; $('.chat-toggle')?.setAttribute('aria-expanded', 'false'); }
      if (document.documentElement.classList.contains('mobile-nav-open')) {
        document.documentElement.classList.remove('mobile-nav-open');
        $('.hamburger')?.setAttribute('aria-expanded', 'false');
      }
    }
  });

  // ---------- Click outside to close drawer/modal (optional) ----------
  document.addEventListener('click', (e) => {
    // if click outside drawer when open, close it
    const drawer = $('#cart-drawer');
    if (drawer && !drawer.hidden) {
      if (!e.target.closest('#cart-drawer') && !e.target.closest('.cart-btn')) closeCart();
    }
    // close builder if click outside modal-shell
    const builder = $('#builder-modal');
    if (builder && !builder.hidden) {
      if (!e.target.closest('#builder-modal .modal-shell') && !e.target.closest('[data-action="open-builder"]')) {
        // don't auto-close if user clicked inside the modal; only close if clicked outside
        closeBuilder();
      }
    }
  });

  // ---------- Utility: scroll anchor offset (prevent header covering) ----------
  $$('a[href^="#"]').forEach(a => {
    a.addEventListener('click', (e) => {
      const href = a.getAttribute('href');
      if (!href || href === '#') return;
      const el = document.querySelector(href);
      if (!el) return;
      e.preventDefault();
      // compute header height
      const header = document.querySelector('.site-header');
      const h = header ? header.getBoundingClientRect().height + 8 : 16;
      const top = el.getBoundingClientRect().top + window.scrollY - h;
      window.scrollTo({ top, behavior: 'smooth' });
    });
  });

  // ---------- Startup initialization ----------
  function startupSafety() {
    // ensure hidden attributes are respected
    ['#builder-modal', '#cart-drawer', '#chat-panel'].forEach(sel => {
      const el = document.querySelector(sel);
      if (el) {
        if (!el.hasAttribute('hidden')) el.hidden = true;
        el.setAttribute('aria-hidden', 'true');
      }
    });
    // remove no-scroll if leftover
    document.documentElement.classList.remove('no-scroll');
    document.body.classList.remove('no-scroll');
  }

  // ---------- Small UI initial render ----------
  function initialRender() {
    applyRepoImages();
    updateCartBadge();
    renderMiniCartTotal();
    renderCartDrawer();
  }

  // ---------- Init all features ----------
  function init() {
    startupSafety();
    initialRender();
    initCarousel();
    initPromo();
    initSearch();
    initFilters();
    initFavorites();
    initChat();
    initMobileNav();
    initBuilderButtons();
    initCartButtons();
    initChat(); // call again to ensure wired
  }

  // additional wiring functions (separated for clarity)
  function initBuilderButtons() {
    // wire builder open buttons (already delegated above) - also wire close-builder via dataset
    // wire qty inc/dec are already delegated
    // ensure stepper buttons wired (we created gotoBuilderStep earlier)
  }

  function initCartButtons() {
    // view-cart and checkout wired above
    // remove item delegated
    // cart drawer close wired above
  }

  // ---------- Small visualization helpers (used by some features) ----------
  function showElement(el) { if (!el) return; el.hidden = false; el.setAttribute('aria-hidden', 'false'); }
  function hideElement(el) { if (!el) return; el.hidden = true; el.setAttribute('aria-hidden', 'true'); }

  // ---------- Expose for debugging convenience ----------
  window.WrapDistrict = {
    openBuilder,
    closeBuilder,
    addToCart,
    removeCartIndex,
    clearCart,
    openCart,
    closeCart,
    cart,
    saveToLocal: () => { save(CART_KEY, cart); save(FAV_KEY, favs); }
  };

  // ---------- Run on DOM ready ----------
  document.addEventListener('DOMContentLoaded', () => {
    try {
      init();
      // small safety: ensure hero carousel dots exist (if not, build)
      const carousel = document.querySelector('[data-carousel]');
      if (carousel && !carousel.querySelector('.carousel-dots')) {
        const slides = carousel.querySelectorAll('.hero-slide');
        const dotsWrap = document.createElement('div');
        dotsWrap.className = 'carousel-dots';
        slides.forEach((s, i) => {
          const b = document.createElement('button');
          b.className = 'dot' + (i === 0 ? ' active' : '');
          b.dataset.slideTo = String(i + 1);
          dotsWrap.appendChild(b);
        });
        carousel.querySelector('.carousel-controls')?.insertBefore(dotsWrap, carousel.querySelector('.carousel-next'));
      }

      // ensure cart & builder modals are truly hidden by setting style if needed (defensive)
      $$('[hidden]').forEach(el => { el.style.visibility = 'hidden'; el.style.pointerEvents = 'none'; });

      console.info('Wrap District script initialized.');
    } catch (err) {
      console.error('Init error:', err);
    }
  });

  // ---------- Small utility: polyfill for querySelector fallback used above ----------
  function $(sel, ctx = document) { return (ctx || document).querySelector(sel); }
  function $$(sel, ctx = document) { return Array.from((ctx || document).querySelectorAll(sel)); }

})();
</script>
</html>
